function commentLengthCounter(a){var b;b=this!==window?$(this).val().length:$(a).val().length,$(".comment-length-counter").html(" "+(600-b))}function Modal(a){function b(a){a.preventDefault(),c.toggle()}this.element=$(a),this.closeButton=$(a).find(".modal-close-button"),this.toggle(),this.closeButton.off("click"),this.closeButton.on("click",b);var c=this}function vote(a){var b=a.data("value"),c=a.data("type"),d=a.data("id"),e="/"+c+"/"+d+"/voto/"+b;fakeUpdateIncrement(a,b),$.ajax(""+e,{complete:function(b,c){if("200"==b.status){var d=b.responseText;voteSuccess(a,d)}else"409"==b.status?errorPopup(Messages.get("vote.ownquestion"),a):"403"==b.status?errorPopup(b.responseText,a):(errorPopup(Messages.get("error.occured"),a),console.log(b));$(".vote-option").removeClass("stop")},accepts:"application/json",method:"POST"})}function removeVote(a){var b=a.data("value"),c=a.data("type"),d=a.data("id"),e="/"+c+"/"+d+"/voto/remove/"+b;fakeUpdateDecrement(a,b),$.ajax(""+e,{complete:function(b,c){if("200"==b.status){var d=b.responseText;voteRemovalSuccess(a,d)}else"409"==b.status?errorPopup(Messages.get("vote.ownquestion"),a):"403"==b.status?errorPopup(b.responseText,a):(errorPopup(Messages.get("error.occured"),a),console.log(b));$(".vote-option").removeClass("stop")},accepts:"application/json",method:"POST"})}function highlight(a){a.addClass("voted").siblings().removeClass("voted")}function removeHighlight(a){a.removeClass("voted").siblings().removeClass("voted")}function updateCount(a,b){var c=$(a).closest(".vote-container").find(".vote-count");c.text(b)}function fakeUpdateIncrement(a,b){var c,d=parseInt($(a).closest(".vote-container").find(".vote-count").html());c="positivo"==b?d+1:d-1,voteSuccess(a,c)}function fakeUpdateDecrement(a,b){var c,d=parseInt($(a).closest(".vote-container").find(".vote-count").html());c="positivo"==b?d-1:d+1,voteRemovalSuccess(a,c)}function voteSuccess(a,b){highlight(a),updateCount(a,b)}function voteRemovalSuccess(a,b){removeHighlight(a),updateCount(a,b)}function isEmpty(a){return 0==a.length}function manipulateBanner(){var a=$(".about-banner");"true"==localStorage.minimizedBanner&&toggleBanner(a)}function toggleBanner(a){a.find(".how-it-works").toggle(300),a.find(".tell-me-more").toggleClass("minimized-banner")}var q=null;window.PR_SHOULD_USE_CONTINUATION=!0,function(){function a(a){function b(a){var b=a.charCodeAt(0);if(92!==b)return b;var c=a.charAt(1);return(b=l[c])?b:"0"<=c&&c<="7"?parseInt(a.substring(1),8):"u"===c||"x"===c?parseInt(a.substring(2),16):a.charCodeAt(1)}function c(a){return a<32?(a<16?"\\x0":"\\x")+a.toString(16):(a=String.fromCharCode(a),"\\"!==a&&"-"!==a&&"["!==a&&"]"!==a||(a="\\"+a),a)}function d(a){for(var d=a.substring(1,a.length-1).match(/\\u[\dA-Fa-f]{4}|\\x[\dA-Fa-f]{2}|\\[0-3][0-7]{0,2}|\\[0-7]{1,2}|\\[\S\s]|[^\\]/g),a=[],e=[],f="^"===d[0],g=f?1:0,h=d.length;g<h;++g){var i=d[g];if(/\\[bdsw]/i.test(i))a.push(i);else{var j,i=b(i);g+2<h&&"-"===d[g+1]?(j=b(d[g+2]),g+=2):j=i,e.push([i,j]),j<65||i>122||(j<65||i>90||e.push([32|Math.max(65,i),32|Math.min(j,90)]),j<97||i>122||e.push([Math.max(97,i)&-33,Math.min(j,122)&-33]))}}for(e.sort(function(a,b){return a[0]-b[0]||b[1]-a[1]}),d=[],i=[NaN,NaN],g=0;g<e.length;++g)h=e[g],h[0]<=i[1]+1?i[1]=Math.max(i[1],h[1]):d.push(i=h);for(e=["["],f&&e.push("^"),e.push.apply(e,a),g=0;g<d.length;++g)h=d[g],e.push(c(h[0])),h[1]>h[0]&&(h[1]+1>h[0]&&e.push("-"),e.push(c(h[1])));return e.push("]"),e.join("")}function e(a){for(var b=a.source.match(/\[(?:[^\\\]]|\\[\S\s])*]|\\u[\dA-Fa-f]{4}|\\x[\dA-Fa-f]{2}|\\\d+|\\[^\dux]|\(\?[!:=]|[()^]|[^()[\\^]+/g),c=b.length,e=[],h=0,i=0;h<c;++h){var j=b[h];"("===j?++i:"\\"===j.charAt(0)&&(j=+j.substring(1))&&j<=i&&(e[j]=-1)}for(h=1;h<e.length;++h)-1===e[h]&&(e[h]=++f);for(i=h=0;h<c;++h)j=b[h],"("===j?(++i,void 0===e[i]&&(b[h]="(?:")):"\\"===j.charAt(0)&&(j=+j.substring(1))&&j<=i&&(b[h]="\\"+e[i]);for(i=h=0;h<c;++h)"^"===b[h]&&"^"!==b[h+1]&&(b[h]="");if(a.ignoreCase&&g)for(h=0;h<c;++h)j=b[h],a=j.charAt(0),j.length>=2&&"["===a?b[h]=d(j):"\\"!==a&&(b[h]=j.replace(/[A-Za-z]/g,function(a){return a=a.charCodeAt(0),"["+String.fromCharCode(a&-33,32|a)+"]"}));return b.join("")}for(var f=0,g=!1,h=!1,i=0,j=a.length;i<j;++i){var k=a[i];if(k.ignoreCase)h=!0;else if(/[a-z]/i.test(k.source.replace(/\\u[\da-f]{4}|\\x[\da-f]{2}|\\[^UXux]/gi,""))){g=!0,h=!1;break}}for(var l={b:8,t:9,n:10,v:11,f:12,r:13},m=[],i=0,j=a.length;i<j;++i){if(k=a[i],k.global||k.multiline)throw Error(""+k);m.push("(?:"+e(k)+")")}return RegExp(m.join("|"),h?"gi":"g")}function b(a){function b(a){switch(a.nodeType){case 1:if(d.test(a.className))break;for(var c=a.firstChild;c;c=c.nextSibling)b(c);c=a.nodeName,"BR"!==c&&"LI"!==c||(e[h]="\n",g[h<<1]=f++,g[h++<<1|1]=a);break;case 3:case 4:c=a.nodeValue,c.length&&(c=i?c.replace(/\r\n?/g,"\n"):c.replace(/[\t\n\r ]+/g," "),e[h]=c,g[h<<1]=f,f+=c.length,g[h++<<1|1]=a)}}var c,d=/(?:^|\s)nocode(?:\s|$)/,e=[],f=0,g=[],h=0;a.currentStyle?c=a.currentStyle.whiteSpace:window.getComputedStyle&&(c=document.defaultView.getComputedStyle(a,q).getPropertyValue("white-space"));var i=c&&"pre"===c.substring(0,3);return b(a),{a:e.join("").replace(/\n$/,""),c:g}}function c(a,b,c,d){b&&(a={a:b,d:a},c(a),d.push.apply(d,a.e))}function d(b,d){function e(a){for(var b=a.d,j=[b,"pln"],k=0,l=a.a.match(f)||[],m={},n=0,o=l.length;n<o;++n){var p,q=l[n],r=m[q],s=void 0;if("string"==typeof r)p=!1;else{var t=g[q.charAt(0)];if(t)s=q.match(t[1]),r=t[0];else{for(p=0;p<i;++p)if(t=d[p],s=q.match(t[1])){r=t[0];break}s||(r="pln")}!(p=r.length>=5&&"lang-"===r.substring(0,5))||s&&"string"==typeof s[1]||(p=!1,r="src"),p||(m[q]=r)}if(t=k,k+=q.length,p){p=s[1];var u=q.indexOf(p),v=u+p.length;s[2]&&(v=q.length-s[2].length,u=v-p.length),r=r.substring(5),c(b+t,q.substring(0,u),e,j),c(b+t+u,p,h(r,p),j),c(b+t+v,q.substring(v),e,j)}else j.push(b+t,r)}a.e=j}var f,g={};!function(){for(var c=b.concat(d),e=[],h={},i=0,j=c.length;i<j;++i){var k=c[i],l=k[3];if(l)for(var m=l.length;--m>=0;)g[l.charAt(m)]=k;k=k[1],l=""+k,h.hasOwnProperty(l)||(e.push(k),h[l]=q)}e.push(/[\S\s]/),f=a(e)}();var i=d.length;return e}function e(a){var b=[],c=[];a.tripleQuotedStrings?b.push(["str",/^(?:'''(?:[^'\\]|\\[\S\s]|''?(?=[^']))*(?:'''|$)|"""(?:[^"\\]|\\[\S\s]|""?(?=[^"]))*(?:"""|$)|'(?:[^'\\]|\\[\S\s])*(?:'|$)|"(?:[^"\\]|\\[\S\s])*(?:"|$))/,q,"'\""]):a.multiLineStrings?b.push(["str",/^(?:'(?:[^'\\]|\\[\S\s])*(?:'|$)|"(?:[^"\\]|\\[\S\s])*(?:"|$)|`(?:[^\\`]|\\[\S\s])*(?:`|$))/,q,"'\"`"]):b.push(["str",/^(?:'(?:[^\n\r'\\]|\\.)*(?:'|$)|"(?:[^\n\r"\\]|\\.)*(?:"|$))/,q,"\"'"]),a.verbatimStrings&&c.push(["str",/^@"(?:[^"]|"")*(?:"|$)/,q]);var e=a.hashComments;return e&&(a.cStyleComments?(e>1?b.push(["com",/^#(?:##(?:[^#]|#(?!##))*(?:###|$)|.*)/,q,"#"]):b.push(["com",/^#(?:(?:define|elif|else|endif|error|ifdef|include|ifndef|line|pragma|undef|warning)\b|[^\n\r]*)/,q,"#"]),c.push(["str",/^<(?:(?:(?:\.\.\/)*|\/?)(?:[\w-]+(?:\/[\w-]+)+)?[\w-]+\.h|[a-z]\w*)>/,q])):b.push(["com",/^#[^\n\r]*/,q,"#"])),a.cStyleComments&&(c.push(["com",/^\/\/[^\n\r]*/,q]),c.push(["com",/^\/\*[\S\s]*?(?:\*\/|$)/,q])),a.regexLiterals&&c.push(["lang-regex",/^(?:^^\.?|[!+-]|!=|!==|#|%|%=|&|&&|&&=|&=|\(|\*|\*=|\+=|,|-=|->|\/|\/=|:|::|;|<|<<|<<=|<=|=|==|===|>|>=|>>|>>=|>>>|>>>=|[?@[^]|\^=|\^\^|\^\^=|{|\||\|=|\|\||\|\|=|~|break|case|continue|delete|do|else|finally|instanceof|return|throw|try|typeof)\s*(\/(?=[^*\/])(?:[^\/[\\]|\\[\S\s]|\[(?:[^\\\]]|\\[\S\s])*(?:]|$))+\/)/]),(e=a.types)&&c.push(["typ",e]),a=(""+a.keywords).replace(/^ | $/g,""),a.length&&c.push(["kwd",RegExp("^(?:"+a.replace(/[\s,]+/g,"|")+")\\b"),q]),b.push(["pln",/^\s+/,q," \r\n\t "]),c.push(["lit",/^@[$_a-z][\w$@]*/i,q],["typ",/^(?:[@_]?[A-Z]+[a-z][\w$@]*|\w+_t\b)/,q],["pln",/^[$_a-z][\w$@]*/i,q],["lit",/^(?:0x[\da-f]+|(?:\d(?:_\d+)*\d*(?:\.\d*)?|\.\d\+)(?:e[+-]?\d+)?)[a-z]*/i,q,"0123456789"],["pln",/^\\[\S\s]?/,q],["pun",/^.[^\s\w"-$'.\/@\\`]*/,q]),d(b,c)}function f(a,b){function c(a){switch(a.nodeType){case 1:if(f.test(a.className))break;if("BR"===a.nodeName)d(a),a.parentNode&&a.parentNode.removeChild(a);else for(a=a.firstChild;a;a=a.nextSibling)c(a);break;case 3:case 4:if(i){var b=a.nodeValue,e=b.match(g);if(e){var j=b.substring(0,e.index);a.nodeValue=j,(b=b.substring(e.index+e[0].length))&&a.parentNode.insertBefore(h.createTextNode(b),a.nextSibling),d(a),j||a.parentNode.removeChild(a)}}}}function d(a){function b(a,c){var d=c?a.cloneNode(!1):a,e=a.parentNode;if(e){var e=b(e,1),f=a.nextSibling;e.appendChild(d);for(var g=f;g;g=f)f=g.nextSibling,e.appendChild(g)}return d}for(;!a.nextSibling;)if(a=a.parentNode,!a)return;for(var c,a=b(a.nextSibling,0);(c=a.parentNode)&&1===c.nodeType;)a=c;j.push(a)}var e,f=/(?:^|\s)nocode(?:\s|$)/,g=/\r\n?|\n/,h=a.ownerDocument;a.currentStyle?e=a.currentStyle.whiteSpace:window.getComputedStyle&&(e=h.defaultView.getComputedStyle(a,q).getPropertyValue("white-space"));var i=e&&"pre"===e.substring(0,3);for(e=h.createElement("LI");a.firstChild;)e.appendChild(a.firstChild);for(var j=[e],k=0;k<j.length;++k)c(j[k]);b===(0|b)&&j[0].setAttribute("value",b);var l=h.createElement("OL");l.className="linenums";for(var m=Math.max(0,b-1|0)||0,k=0,n=j.length;k<n;++k)e=j[k],e.className="L"+(k+m)%10,e.firstChild||e.appendChild(h.createTextNode(" ")),l.appendChild(e);a.appendChild(l)}function g(a,b){for(var c=b.length;--c>=0;){var d=b[c];u.hasOwnProperty(d)?window.console&&console.warn("cannot override language handler %s",d):u[d]=a}}function h(a,b){return a&&u.hasOwnProperty(a)||(a=/^\s*</.test(b)?"default-markup":"default-code"),u[a]}function i(a){var c=a.g;try{var d=b(a.h),e=d.a;a.a=e,a.c=d.c,a.d=0,h(c,e)(a);var f=/\bMSIE\b/.test(navigator.userAgent),c=/\n/g,g=a.a,i=g.length,d=0,j=a.c,k=j.length,e=0,l=a.e,m=l.length,a=0;l[m]=i;var n,o;for(o=n=0;o<m;)l[o]!==l[o+2]?(l[n++]=l[o++],l[n++]=l[o++]):o+=2;for(m=n,o=n=0;o<m;){for(var p=l[o],q=l[o+1],r=o+2;r+2<=m&&l[r+1]===q;)r+=2;l[n++]=p,l[n++]=q,o=r}for(l.length=n;e<k;){var s,t=j[e+2]||i,u=l[a+2]||i,r=Math.min(t,u),v=j[e+1];if(1!==v.nodeType&&(s=g.substring(d,r))){f&&(s=s.replace(c,"\r")),v.nodeValue=s;var w=v.ownerDocument,x=w.createElement("SPAN");x.className=l[a+1];var y=v.parentNode;y.replaceChild(x,v),x.appendChild(v),d<t&&(j[e+1]=v=w.createTextNode(g.substring(r,t)),y.insertBefore(v,x.nextSibling))}d=r,d>=t&&(e+=2),d>=u&&(a+=2)}}catch(a){"console"in window&&console.log(a&&a.stack?a.stack:a)}}var j=["break,continue,do,else,for,if,return,while"],k=[[j,"auto,case,char,const,default,double,enum,extern,float,goto,int,long,register,short,signed,sizeof,static,struct,switch,typedef,union,unsigned,void,volatile"],"catch,class,delete,false,import,new,operator,private,protected,public,this,throw,true,try,typeof"],l=[k,"alignof,align_union,asm,axiom,bool,concept,concept_map,const_cast,constexpr,decltype,dynamic_cast,explicit,export,friend,inline,late_check,mutable,namespace,nullptr,reinterpret_cast,static_assert,static_cast,template,typeid,typename,using,virtual,where"],m=[k,"abstract,boolean,byte,extends,final,finally,implements,import,instanceof,null,native,package,strictfp,super,synchronized,throws,transient"],n=[m,"as,base,by,checked,decimal,delegate,descending,dynamic,event,fixed,foreach,from,group,implicit,in,interface,internal,into,is,lock,object,out,override,orderby,params,partial,readonly,ref,sbyte,sealed,stackalloc,string,select,uint,ulong,unchecked,unsafe,ushort,var"],k=[k,"debugger,eval,export,function,get,null,set,undefined,var,with,Infinity,NaN"],o=[j,"and,as,assert,class,def,del,elif,except,exec,finally,from,global,import,in,is,lambda,nonlocal,not,or,pass,print,raise,try,with,yield,False,True,None"],p=[j,"alias,and,begin,case,class,def,defined,elsif,end,ensure,false,in,module,next,nil,not,or,redo,rescue,retry,self,super,then,true,undef,unless,until,when,yield,BEGIN,END"],j=[j,"case,done,elif,esac,eval,fi,function,in,local,set,then,until"],r=/^(DIR|FILE|vector|(de|priority_)?queue|list|stack|(const_)?iterator|(multi)?(set|map)|bitset|u?(int|float)\d*)/,s=/\S/,t=e({keywords:[l,n,k,"caller,delete,die,do,dump,elsif,eval,exit,foreach,for,goto,if,import,last,local,my,next,no,our,print,package,redo,require,sub,undef,unless,until,use,wantarray,while,BEGIN,END"+o,p,j],hashComments:!0,cStyleComments:!0,multiLineStrings:!0,regexLiterals:!0}),u={};g(t,["default-code"]),g(d([],[["pln",/^[^<?]+/],["dec",/^<!\w[^>]*(?:>|$)/],["com",/^<\!--[\S\s]*?(?:--\>|$)/],["lang-",/^<\?([\S\s]+?)(?:\?>|$)/],["lang-",/^<%([\S\s]+?)(?:%>|$)/],["pun",/^(?:<[%?]|[%?]>)/],["lang-",/^<xmp\b[^>]*>([\S\s]+?)<\/xmp\b[^>]*>/i],["lang-js",/^<script\b[^>]*>([\S\s]*?)(<\/script\b[^>]*>)/i],["lang-css",/^<style\b[^>]*>([\S\s]*?)(<\/style\b[^>]*>)/i],["lang-in.tag",/^(<\/?[a-z][^<>]*>)/i]]),["default-markup","htm","html","mxml","xhtml","xml","xsl"]),g(d([["pln",/^\s+/,q," \t\r\n"],["atv",/^(?:"[^"]*"?|'[^']*'?)/,q,"\"'"]],[["tag",/^^<\/?[a-z](?:[\w-.:]*\w)?|\/?>$/i],["atn",/^(?!style[\s=]|on)[a-z](?:[\w:-]*\w)?/i],["lang-uq.val",/^=\s*([^\s"'>]*(?:[^\s"'\/>]|\/(?=\s)))/],["pun",/^[\/<->]+/],["lang-js",/^on\w+\s*=\s*"([^"]+)"/i],["lang-js",/^on\w+\s*=\s*'([^']+)'/i],["lang-js",/^on\w+\s*=\s*([^\s"'>]+)/i],["lang-css",/^style\s*=\s*"([^"]+)"/i],["lang-css",/^style\s*=\s*'([^']+)'/i],["lang-css",/^style\s*=\s*([^\s"'>]+)/i]]),["in.tag"]),g(d([],[["atv",/^[\S\s]+/]]),["uq.val"]),g(e({keywords:l,hashComments:!0,cStyleComments:!0,types:r}),["c","cc","cpp","cxx","cyc","m"]),g(e({keywords:"null,true,false"}),["json"]),g(e({keywords:n,hashComments:!0,cStyleComments:!0,verbatimStrings:!0,types:r}),["cs"]),g(e({keywords:m,cStyleComments:!0}),["java"]),g(e({keywords:j,hashComments:!0,multiLineStrings:!0}),["bsh","csh","sh"]),g(e({keywords:o,hashComments:!0,multiLineStrings:!0,tripleQuotedStrings:!0}),["cv","py"]),g(e({keywords:"caller,delete,die,do,dump,elsif,eval,exit,foreach,for,goto,if,import,last,local,my,next,no,our,print,package,redo,require,sub,undef,unless,until,use,wantarray,while,BEGIN,END",hashComments:!0,multiLineStrings:!0,regexLiterals:!0}),["perl","pl","pm"]),g(e({keywords:p,hashComments:!0,multiLineStrings:!0,regexLiterals:!0}),["rb"]),g(e({keywords:k,cStyleComments:!0,regexLiterals:!0}),["js"]),g(e({keywords:"all,and,by,catch,class,else,extends,false,finally,for,if,in,is,isnt,loop,new,no,not,null,of,off,on,or,return,super,then,true,try,unless,until,when,while,yes",hashComments:3,cStyleComments:!0,multilineStrings:!0,tripleQuotedStrings:!0,regexLiterals:!0}),["coffee"]),g(d([],[["str",/^[\S\s]+/]]),["regex"]),window.prettyPrintOne=function(a,b,c){var d=document.createElement("PRE");return d.innerHTML=a,c&&f(d,c),i({g:b,i:c,h:d}),d.innerHTML},window.prettyPrint=function(a){function b(){for(var c=window.PR_SHOULD_USE_CONTINUATION?j.now()+250:1/0;l<d.length&&j.now()<c;l++){var e=d[l],g=e.className;if(g.indexOf("prettyprint")>=0){var h,n,g=g.match(m);if(n=!g){n=e;for(var o=void 0,p=n.firstChild;p;p=p.nextSibling)var q=p.nodeType,o=1===q?o?n:p:3===q&&s.test(p.nodeValue)?n:o;n=(h=o===n?void 0:o)&&"CODE"===h.tagName}for(n&&(g=h.className.match(m)),g&&(g=g[1]),n=!1,o=e.parentNode;o;o=o.parentNode)if(("pre"===o.tagName||"code"===o.tagName||"xmp"===o.tagName)&&o.className&&o.className.indexOf("prettyprint")>=0){n=!0;break}n||((n=!!(n=e.className.match(/\blinenums\b(?::(\d+))?/))&&(!n[1]||!n[1].length||+n[1]))&&f(e,n),k={g:g,h:e,i:n},i(k))}}l<d.length?setTimeout(b,250):a&&a()}for(var c=[document.getElementsByTagName("pre"),document.getElementsByTagName("code"),document.getElementsByTagName("xmp")],d=[],e=0;e<c.length;++e)for(var g=0,h=c[e].length;g<h;++g)d.push(c[e][g]);var c=q,j=Date;j.now||(j={now:function(){return+new Date}});var k,l=0,m=/\blang(?:uage)?-([\w.]+)(?!\S)/;b()},window.PR={createSimpleLexer:d,registerLangHandler:g,sourceDecorator:e,PR_ATTRIB_NAME:"atn",PR_ATTRIB_VALUE:"atv",PR_COMMENT:"com",PR_DECLARATION:"dec",PR_KEYWORD:"kwd",PR_LITERAL:"lit",PR_NOCODE:"nocode",PR_PLAIN:"pln",PR_PUNCTUATION:"pun",PR_SOURCE:"src",PR_STRING:"str",PR_TAG:"tag",PR_TYPE:"typ"}}();var Markdown;Markdown="object"==typeof exports&&"function"==typeof require?exports:{},function(){function a(a){return a}function b(a){return!1}function c(){}function d(){}c.prototype={chain:function(b,c){var d=this[b];if(!d)throw new Error("unknown hook "+b);d===a?this[b]=c:this[b]=function(a){return c(d(a))}},set:function(a,b){if(!this[a])throw new Error("unknown hook "+a);this[a]=b},addNoop:function(b){this[b]=a},addFalse:function(a){this[a]=b}},Markdown.HookCollection=c,d.prototype={set:function(a,b){this["s_"+a]=b},get:function(a){return this["s_"+a]}},Markdown.Converter=function(){function a(a){return a=a.replace(/^[ ]{0,3}\[(.+)\]:[ \t]*\n?[ \t]*<?(\S+?)>?(?=\s|$)[ \t]*\n?[ \t]*((\n*)["(](.+?)[")][ \t]*)?(?:\n+)/gm,function(a,b,c,d,e,f){return b=b.toLowerCase(),I.set(b,x(c)),e?d:(f&&J.set(b,f.replace(/"/g,"&quot;")),"")})}function b(a){return a=a.replace(/^(<(p|div|h[1-6]|blockquote|pre|table|dl|ol|ul|script|noscript|form|fieldset|iframe|math|ins|del)\b[^\r]*?\n<\/\2>[ \t]*(?=\n+))/gm,e),a=a.replace(/^(<(p|div|h[1-6]|blockquote|pre|table|dl|ol|ul|script|noscript|form|fieldset|iframe|math)\b[^\r]*?.*<\/\2>[ \t]*(?=\n+)\n)/gm,e),a=a.replace(/\n[ ]{0,3}((<(hr)\b([^<>])*?\/?>)[ \t]*(?=\n{2,}))/g,e),a=a.replace(/\n\n[ ]{0,3}(<!(--(?:|(?:[^>-]|-[^>])(?:[^-]|-[^-])*)--)>[ \t]*(?=\n{2,}))/g,e),a=a.replace(/(?:\n\n)([ ]{0,3}(?:<([?%])[^\r]*?\2>)[ \t]*(?=\n{2,}))/g,e)}function e(a,b){var c=b;return c=c.replace(/^\n+/,""),c=c.replace(/\n+$/g,""),c="\n\n~K"+(K.push(c)-1)+"K\n\n"}function f(a,c){a=n(a);var d="<hr />\n";return a=a.replace(/^[ ]{0,2}([ ]?\*[ ]?){3,}[ \t]*$/gm,d),a=a.replace(/^[ ]{0,2}([ ]?-[ ]?){3,}[ \t]*$/gm,d),a=a.replace(/^[ ]{0,2}([ ]?_[ ]?){3,}[ \t]*$/gm,d),a=o(a),a=q(a),a=v(a),a=b(a),a=w(a,c)}function g(a){return a=s(a),a=h(a),a=y(a),a=k(a),a=i(a),a=A(a),a=a.replace(/~P/g,"://"),a=x(a),a=u(a),a=a.replace(/  +\n/g," <br>\n")}function h(a){var b=/(<[a-z\/!$]("[^"]*"|'[^']*'|[^'">])*>|<!(--(?:|(?:[^>-]|-[^>])(?:[^-]|-[^-])*)--)>)/gi;return a=a.replace(b,function(a){var b=a.replace(/(.)<\/?code>(?=.)/g,"$1`");return b=F(b,"!"==a.charAt(1)?"\\`*_/":"\\`*_")})}function i(a){return a=a.replace(/(\[((?:\[[^\]]*\]|[^\[\]])*)\][ ]?(?:\n[ ]*)?\[(.*?)\])()()()()/g,j),a=a.replace(/(\[((?:\[[^\]]*\]|[^\[\]])*)\]\([ \t]*()<?((?:\([^)]*\)|[^()\s])*?)>?[ \t]*((['"])(.*?)\6[ \t]*)?\))/g,j),a=a.replace(/(\[([^\[\]]+)\])()()()()()/g,j)}function j(a,b,c,d,e,f,g,h){void 0==h&&(h="");var i=b,j=c.replace(/:\/\//g,"~P"),k=d.toLowerCase(),m=e,n=h;if(""==m)if(""==k&&(k=j.toLowerCase().replace(/ ?\n/g," ")),m="#"+k,void 0!=I.get(k))m=I.get(k),void 0!=J.get(k)&&(n=J.get(k));else{if(!(i.search(/\(\s*\)$/m)>-1))return i;m=""}m=E(m),m=F(m,"*_");var o='<a href="'+m+'"';return""!=n&&(n=l(n),n=F(n,"*_"),o+=' title="'+n+'"'),o+=">"+j+"</a>"}function k(a){return a=a.replace(/(!\[(.*?)\][ ]?(?:\n[ ]*)?\[(.*?)\])()()()()/g,m),a=a.replace(/(!\[(.*?)\]\s?\([ \t]*()<?(\S+?)>?[ \t]*((['"])(.*?)\6[ \t]*)?\))/g,m)}function l(a){return a.replace(/>/g,"&gt;").replace(/</g,"&lt;").replace(/"/g,"&quot;")}function m(a,b,c,d,e,f,g,h){var i=b,j=c,k=d.toLowerCase(),m=e,n=h;if(n||(n=""),""==m){if(""==k&&(k=j.toLowerCase().replace(/ ?\n/g," ")),m="#"+k,void 0==I.get(k))return i;m=I.get(k),void 0!=J.get(k)&&(n=J.get(k))}j=F(l(j),"*_[]()"),m=F(m,"*_");var o='<img src="'+m+'" alt="'+j+'"';return n=l(n),n=F(n,"*_"),o+=' title="'+n+'"',o+=" />"}function n(a){return a=a.replace(/^(.+)[ \t]*\n=+[ \t]*\n+/gm,function(a,b){return"<h1>"+g(b)+"</h1>\n\n"}),a=a.replace(/^(.+)[ \t]*\n-+[ \t]*\n+/gm,function(a,b){return"<h2>"+g(b)+"</h2>\n\n"}),a=a.replace(/^(\#{1,6})[ \t]*(.+?)[ \t]*\#*\n+/gm,function(a,b,c){var d=b.length;return"<h"+d+">"+g(c)+"</h"+d+">\n\n"})}function o(a){a+="~0";var b=/^(([ ]{0,3}([*+-]|\d+[.])[ \t]+)[^\r]+?(~0|\n{2,}(?=\S)(?![ \t]*(?:[*+-]|\d+[.])[ \t]+)))/gm;return L?a=a.replace(b,function(a,b,c){var d=b,e=c.search(/[*+-]/g)>-1?"ul":"ol",f=p(d,e);return f=f.replace(/\s+$/,""),f="<"+e+">"+f+"</"+e+">\n"}):(b=/(\n\n|^\n?)(([ ]{0,3}([*+-]|\d+[.])[ \t]+)[^\r]+?(~0|\n{2,}(?=\S)(?![ \t]*(?:[*+-]|\d+[.])[ \t]+)))/g,a=a.replace(b,function(a,b,c,d){var e=b,f=c,g=d.search(/[*+-]/g)>-1?"ul":"ol",h=p(f,g);return h=e+"<"+g+">\n"+h+"</"+g+">\n"})),a=a.replace(/~0/,"")}function p(a,b){L++,a=a.replace(/\n{2,}$/,"\n"),a+="~0";var c=M[b],d=new RegExp("(^[ \\t]*)("+c+")[ \\t]+([^\\r]+?(\\n+))(?=(~0|\\1("+c+")[ \\t]+))","gm"),e=!1;return a=a.replace(d,function(a,b,c,d){var h=d,i=/\n\n$/.test(h),j=i||h.search(/\n{2,}/)>-1;return j||e?h=f(C(h),!0):(h=o(C(h)),h=h.replace(/\n$/,""),h=g(h)),e=i,"<li>"+h+"</li>\n"}),a=a.replace(/~0/g,""),L--,a}function q(a){return a+="~0",a=a.replace(/(?:\n\n|^)((?:(?:[ ]{4}|\t).*\n+)+)(\n*[ ]{0,3}[^ \t\n]|(?=~0))/g,function(a,b,c){var d=b,e=c;return d=t(C(d)),d=D(d),d=d.replace(/^\n+/g,""),d=d.replace(/\n+$/g,""),d="<pre class='prettyprint'>"+d+"\n</pre>","\n\n"+d+"\n\n"+e}),a=a.replace(/~0/,"")}function r(a){return a=a.replace(/(^\n+|\n+$)/g,""),"\n\n~K"+(K.push(a)-1)+"K\n\n"}function s(a){return a=a.replace(/(^|[^\\])(`+)([^\r]*?[^`])\2(?!`)/gm,function(a,b,c,d,e){var f=d;return f=f.replace(/^([ \t]*)/g,""),f=f.replace(/[ \t]*$/g,""),f=t(f),f=f.replace(/:\/\//g,"~P"),b+"<code>"+f+"</code>"})}function t(a){return a=a.replace(/&/g,"&amp;"),a=a.replace(/</g,"&lt;"),a=a.replace(/>/g,"&gt;"),a=F(a,"*_{}[]\\",!1)}function u(a){return a=a.replace(/([\W_]|^)(\*\*|__)(?=\S)([^\r]*?\S[\*_]*)\2([\W_]|$)/g,"$1<strong>$3</strong>$4"),a=a.replace(/([\W_]|^)(\*|_)(?=\S)([^\r\*_]*?\S)\2([\W_]|$)/g,"$1<em>$3</em>$4")}function v(a){return a=a.replace(/((^[ \t]*>[ \t]?.+\n(.+\n)*\n*)+)/gm,function(a,b){var c=b;return c=c.replace(/^[ \t]*>[ \t]?/gm,"~0"),c=c.replace(/~0/g,""),c=c.replace(/^[ \t]+$/gm,""),c=f(c),c=c.replace(/(^|\n)/g,"$1  "),c=c.replace(/(\s*<pre>[^\r]+?<\/pre>)/gm,function(a,b){var c=b;return c=c.replace(/^  /gm,"~0"),c=c.replace(/~0/g,"")}),r("<blockquote>\n"+c+"\n</blockquote>")})}function w(a,b){a=a.replace(/^\n+/g,""),a=a.replace(/\n+$/g,"");for(var c=a.split(/\n{2,}/g),d=[],e=/~K(\d+)K/,f=c.length,h=0;h<f;h++){var i=c[h];e.test(i)?d.push(i):/\S/.test(i)&&(i=g(i),i=i.replace(/^([ \t]*)/g,"<p>"),i+="</p>",d.push(i))}if(!b){f=d.length;for(var h=0;h<f;h++)for(var j=!0;j;)j=!1,d[h]=d[h].replace(/~K(\d+)K/g,function(a,b){return j=!0,K[b]})}return d.join("\n\n")}function x(a){return a=a.replace(/&(?!#?[xX]?(?:[0-9a-fA-F]+|\w+);)/g,"&amp;"),a=a.replace(/<(?![a-z\/?!]|~D)/gi,"&lt;")}function y(a){return a=a.replace(/\\(\\)/g,G),a=a.replace(/\\([`*_{}\[\]()>#+-.!])/g,G)}function z(a,b,c,d){if(b)return a;if(")"!==d.charAt(d.length-1))return"<"+c+d+">";for(var e=d.match(/[()]/g),f=0,g=0;g<e.length;g++)"("===e[g]?f<=0?f=1:f++:f--;var h="";if(f<0){var i=new RegExp("\\){1,"+-f+"}$");d=d.replace(i,function(a){return h=a,""})}return"<"+c+d+">"+h}function A(a){a=a.replace(/(="|<)?\b(https?|ftp)(:\/\/[-A-Z0-9+&@#\/%?=~_|\[\]\(\)!:,\.;]*[-A-Z0-9+&@#\/%=~_|\[\])])(?=$|\W)/gi,z);var b=function(a,b){return'<a href="'+b+'">'+H.plainLinkText(b)+"</a>"};return a=a.replace(/<((https?|ftp):[^'">\s]+)>/gi,b)}function B(a){return a=a.replace(/~E(\d+)E/g,function(a,b){var c=parseInt(b);return String.fromCharCode(c)})}function C(a){return a=a.replace(/^(\t|[ ]{1,4})/gm,"~0"),a=a.replace(/~0/g,"")}function D(a){if(!/\t/.test(a))return a;var b,c=["    ","   ","  "," "],d=0;return a.replace(/[\n\t]/g,function(a,e){return"\n"===a?(d=e+1,a):(b=(e-d)%4,d=e+1,c[b])})}function E(a){if(!a)return"";var b=a.length;return a.replace(N,function(c,d){return"~D"==c?"%24":":"!=c||d!=b-1&&!/[0-9\/]/.test(a.charAt(d+1))?"%"+c.charCodeAt(0).toString(16):":"})}function F(a,b,c){var d="(["+b.replace(/([\[\]\\])/g,"\\$1")+"])";c&&(d="\\\\"+d);var e=new RegExp(d,"g");return a=a.replace(e,G)}function G(a,b){var c=b.charCodeAt(0);return"~E"+c+"E"}var H=this.hooks=new c;H.addNoop("plainLinkText"),H.addNoop("preConversion"),H.addNoop("postConversion");var I,J,K,L;this.makeHtml=function(c){if(I)throw new Error("Recursive call to converter.makeHtml");return I=new d,J=new d,K=[],L=0,c=H.preConversion(c),c=c.replace(/~/g,"~T"),c=c.replace(/\$/g,"~D"),c=c.replace(/\r\n/g,"\n"),c=c.replace(/\r/g,"\n"),c="\n\n"+c+"\n\n",c=D(c),c=c.replace(/^[ \t]+$/gm,""),c=b(c),c=a(c),c=f(c),c=B(c),c=c.replace(/~D/g,"$$"),c=c.replace(/~T/g,"~"),c=H.postConversion(c),K=J=I=null,c};var M={ol:"\\d+[.]",ul:"[*+-]"},N=/(?:["'*()[\]:]|~D)/g}}(),function(){function a(a){return a.replace(/<[^>]*>?/gi,b)}function b(a){return a.match(f)||a.match(g)||a.match(h)?a:""}function c(a){if(""==a)return"";var b=/<\/?\w+[^>]*(\s|$|>)/g,c=a.toLowerCase().match(b),d=(c||[]).length;if(0==d)return a;for(var e,f,g,h="<p><img><br><li><hr>",i=[],j=[],k=!1,l=0;l<d;l++)if(e=c[l].replace(/<\/?(\w+).*/,"$1"),!(i[l]||h.search("<"+e+">")>-1)){if(f=c[l],g=-1,!/^<\//.test(f))for(var m=l+1;m<d;m++)if(!i[m]&&c[m]=="</"+e+">"){g=m;break}g==-1?k=j[l]=!0:i[g]=!0}if(!k)return a;var l=0;return a=a.replace(b,function(a){var b=j[l]?"":a;return l++,b})}var d,e;"object"==typeof exports&&"function"==typeof require?(d=exports,e=require("./Markdown.Converter").Converter):(d=window.Markdown,e=d.Converter),d.getSanitizingConverter=function(){var b=new e;return b.hooks.chain("postConversion",a),b.hooks.chain("postConversion",c),b};var f=/^(<\/?(b|blockquote|code|del|dd|dl|dt|em|h1|h2|h3|i|kbd|li|ol|p|pre|s|sup|sub|strong|strike|ul)>|<(br|hr)\s?\/?>)$/i,g=/^(<a\shref="((https?|ftp):\/\/|\/)[-A-Za-z0-9+&@#\/%?=~_|!:,.;\(\)]+"(\stitle="[^"<>]+")?\s?>|<\/a>)$/i,h=/^(<img\ssrc="(https?:\/\/|\/)[-A-Za-z0-9+&@#\/%?=~_|!:,.;\(\)]+"(\swidth="\d{1,3}")?(\sheight="\d{1,3}")?(\salt="[^"<>]*")?(\stitle="[^"<>]*")?\s?\/?>)$/i}(),function(){function a(){}function b(a){this.buttonBar=l.getElementById("wmd-button-bar"+a),this.preview=l.getElementById("wmd-preview"+a),this.input=l.getElementById("wmd-input"+a)}function c(a,b){var c,e,f,g=this,h=[],j=0,k="none",l=function(a,b){k!=a&&(k=a,b||n()),p.isIE&&"moving"==k?f=null:e=setTimeout(m,1)},m=function(a){f=new d(b,a),e=void 0};this.setCommandMode=function(){k="command",n(),e=setTimeout(m,0)},this.canUndo=function(){return j>1},this.canRedo=function(){return!!h[j+1]},this.undo=function(){g.canUndo()&&(c?(c.restore(),c=null):(h[j]=new d(b),h[--j].restore(),a&&a())),k="none",b.input.focus(),m()},this.redo=function(){g.canRedo()&&(h[++j].restore(),a&&a()),k="none",b.input.focus(),m()};var n=function(){var e=f||new d(b);return!!e&&("moving"==k?void(c||(c=e)):(c&&(h[j-1].text!=c.text&&(h[j++]=c),c=null),h[j++]=e,h[j+1]=null,void(a&&a())))},o=function(a){var b=!1;if((a.ctrlKey||a.metaKey)&&!a.altKey){var c=a.charCode||a.keyCode,d=String.fromCharCode(c);switch(d.toLowerCase()){case"y":g.redo(),b=!0;break;case"z":a.shiftKey?g.redo():g.undo(),b=!0}}if(b)return a.preventDefault&&a.preventDefault(),void(window.event&&(window.event.returnValue=!1))},q=function(a){if(!a.ctrlKey&&!a.metaKey){var b=a.keyCode;b>=33&&b<=40||b>=63232&&b<=63235?l("moving"):8==b||46==b||127==b?l("deleting"):13==b?l("newlines"):27==b?l("escape"):(b<16||b>20)&&91!=b&&l("typing")}},r=function(){i.addEvent(b.input,"keypress",function(a){!a.ctrlKey&&!a.metaKey||a.altKey||89!=a.keyCode&&90!=a.keyCode||a.preventDefault()});var a=function(){(p.isIE||f&&f.text!=b.input.value)&&void 0==e&&(k="paste",n(),m())};i.addEvent(b.input,"keydown",o),i.addEvent(b.input,"keydown",q),i.addEvent(b.input,"mousedown",function(){l("moving")}),b.input.onpaste=a,b.input.ondrop=a},s=function(){r(),m(!0),n()};s()}function d(b,c){var d=this,e=b.input;this.init=function(){i.isVisible(e)&&(!c&&l.activeElement&&l.activeElement!==e||(this.setInputAreaSelectionStartEnd(),this.scrollTop=e.scrollTop,(!this.text&&e.selectionStart||0===e.selectionStart)&&(this.text=e.value)))},this.setInputAreaSelection=function(){if(i.isVisible(e))if(void 0===e.selectionStart||p.isOpera){if(l.selection){if(l.activeElement&&l.activeElement!==e)return;e.focus();var a=e.createTextRange();a.moveStart("character",-e.value.length),a.moveEnd("character",-e.value.length),a.moveEnd("character",d.end),a.moveStart("character",d.start),a.select()}}else e.focus(),e.selectionStart=d.start,e.selectionEnd=d.end,e.scrollTop=d.scrollTop},this.setInputAreaSelectionStartEnd=function(){if(b.ieCachedRange||!e.selectionStart&&0!==e.selectionStart){if(l.selection){d.text=i.fixEolChars(e.value);var a=b.ieCachedRange||l.selection.createRange(),c=i.fixEolChars(a.text),f="",g=f+c+f;a.text=g;var h=i.fixEolChars(e.value);a.moveStart("character",-g.length),a.text=c,d.start=h.indexOf(f),d.end=h.lastIndexOf(f)-f.length;var j=d.text.length-i.fixEolChars(e.value).length;if(j){for(a.moveStart("character",-c.length);j--;)c+="\n",d.end+=1;a.text=c}b.ieCachedRange&&(d.scrollTop=b.ieCachedScrollTop),b.ieCachedRange=null,this.setInputAreaSelection()}}else d.start=e.selectionStart,d.end=e.selectionEnd},this.restore=function(){void 0!=d.text&&d.text!=e.value&&(e.value=d.text),this.setInputAreaSelection(),e.scrollTop=d.scrollTop},this.getChunks=function(){var b=new a;return b.before=i.fixEolChars(d.text.substring(0,d.start)),b.startTag="",b.selection=i.fixEolChars(d.text.substring(d.start,d.end)),b.endTag="",b.after=i.fixEolChars(d.text.substring(d.end)),b.scrollTop=d.scrollTop,b},this.setChunks=function(a){a.before=a.before+a.startTag,a.after=a.endTag+a.after,this.start=a.before.length,this.end=a.before.length+a.selection.length,this.text=a.before+a.selection+a.after,this.scrollTop=a.scrollTop},this.init()}function e(a,b,c){var d,e,f,g=3e3,h="delayed",k=function(a,b){i.addEvent(a,"input",b),a.onpaste=b,a.ondrop=b,i.addEvent(a,"keypress",b),i.addEvent(a,"keydown",b)},m=function(){var a=0;return window.innerHeight?a=window.pageYOffset:l.documentElement&&l.documentElement.scrollTop?a=l.documentElement.scrollTop:l.body&&(a=l.body.scrollTop),a},n=function(){if(b.preview){var c=b.input.value;if(!c||c!=f){f=c;var d=(new Date).getTime();c=a.makeHtml(c);var g=(new Date).getTime();e=g-d,x(c)}}},o=function(){if(d&&(clearTimeout(d),d=void 0),"manual"!==h){var a=0;"delayed"===h&&(a=e),a>g&&(a=g),d=setTimeout(n,a)}},q=function(a){return a.scrollHeight<=a.clientHeight?1:a.scrollTop/(a.scrollHeight-a.clientHeight)},r=function(){b.preview&&(b.preview.scrollTop=(b.preview.scrollHeight-b.preview.clientHeight)*q(b.preview))};this.refresh=function(a){a?(f="",n()):o()},this.processingTime=function(){return e};var s,t=!0,u=function(a){var c=b.preview,d=c.parentNode,e=c.nextSibling;d.removeChild(c),c.innerHTML=a,e?d.insertBefore(c,e):d.appendChild(c)},v=function(a){b.preview.innerHTML=a},w=function(a){if(s)return s(a);try{v(a),s=v}catch(b){s=u,s(a)}},x=function(a){var d=j.getTop(b.input)-m();if(b.preview&&(w(a),c()),r(),t)return void(t=!1);var e=j.getTop(b.input)-m();p.isIE?setTimeout(function(){window.scrollBy(0,e-d)},0):window.scrollBy(0,e-d)},y=function(){k(b.input,o),n(),b.preview&&(b.preview.scrollTop=0)};y()}function f(a,b,c,e,f,g,h){function j(a){if(r.focus(),a.textOp){c&&c.setCommandMode();var f=new d(b);if(!f)return;var g=f.getChunks(),h=function(){r.focus(),g&&f.setChunks(g),f.restore(),e.refresh()},i=a.textOp(g,h);i||h()}a.execute&&a.execute(c)}function k(a,c){var d="0px",e="-20px",f="-40px",g=a.getElementsByTagName("span")[0];c?(g.style.backgroundPosition=a.XShift+" "+d,a.onmouseover=function(){g.style.backgroundPosition=this.XShift+" "+f},a.onmouseout=function(){g.style.backgroundPosition=this.XShift+" "+d},p.isIE&&(a.onmousedown=function(){l.activeElement&&l.activeElement!==b.input||(b.ieCachedRange=document.selection.createRange(),b.ieCachedScrollTop=b.input.scrollTop)}),a.isHelp||(a.onclick=function(){return this.onmouseout&&this.onmouseout(),j(this),!1})):(g.style.backgroundPosition=a.XShift+" "+e,a.onmouseover=a.onmouseout=a.onclick=function(){})}function m(a){return"string"==typeof a&&(a=f[a]),function(){a.apply(f,arguments)}}function o(){var c=b.buttonBar,d=document.createElement("ul");d.id="wmd-button-row"+a,d.className="wmd-button-row",d=c.appendChild(d);var e=0,f=function(b,c,f,g){var h=document.createElement("li");h.className="wmd-button",h.style.left=e+"px",e+=25;var i=document.createElement("span");return h.id=b+a,h.appendChild(i),h.title=c,h.XShift=f,g&&(h.textOp=g),k(h,!0),d.appendChild(h),h},i=function(b){var c=document.createElement("li");c.className="wmd-spacer wmd-spacer"+b,c.id="wmd-spacer"+b+a,
d.appendChild(c),e+=25};s.bold=f("wmd-bold-button",h("bold"),"0px",m("doBold")),s.italic=f("wmd-italic-button",h("italic"),"-20px",m("doItalic")),i(1),s.link=f("wmd-link-button",h("link"),"-40px",m(function(a,b){return this.doLinkOrImage(a,b,!1)})),s.quote=f("wmd-quote-button",h("quote"),"-60px",m("doBlockquote")),s.code=f("wmd-code-button",h("code"),"-80px",m("doCode")),s.image=f("wmd-image-button",h("image"),"-100px",m(function(a,b){return this.doImage(a,b)})),i(2),s.olist=f("wmd-olist-button",h("olist"),"-120px",m(function(a,b){this.doList(a,b,!0)})),s.ulist=f("wmd-ulist-button",h("ulist"),"-140px",m(function(a,b){this.doList(a,b,!1)})),s.heading=f("wmd-heading-button",h("heading"),"-160px",m("doHeading")),s.hr=f("wmd-hr-button",h("hr"),"-180px",m("doHorizontalRule")),i(3),s.undo=f("wmd-undo-button",h("undo"),"-200px",null),s.undo.execute=function(a){a&&a.undo()};var j=h(/win/.test(n.platform.toLowerCase())?"redo":"redomac");if(s.redo=f("wmd-redo-button",j,"-220px",null),s.redo.execute=function(a){a&&a.redo()},g){var l=document.createElement("li"),o=document.createElement("span");l.appendChild(o),l.className="wmd-button wmd-help-button",l.id="wmd-help-button"+a,l.XShift="-240px",l.isHelp=!0,l.style.right="0px",l.title=h("help"),l.onclick=g.handler,k(l,!0),d.appendChild(l),s.help=l}q()}function q(){c&&(k(s.undo,c.canUndo()),k(s.redo,c.canRedo()))}var r=b.input,s={};o();var t="keydown";p.isOpera&&(t="keypress"),i.addEvent(r,t,function(a){if((a.ctrlKey||a.metaKey)&&!a.altKey&&!a.shiftKey){var b=a.charCode||a.keyCode,c=String.fromCharCode(b).toLowerCase();switch(c){case"b":j(s.bold);break;case"i":j(s.italic);break;case"l":j(s.link);break;case"q":j(s.quote);break;case"k":j(s.code);break;case"g":j(s.image);break;case"o":j(s.olist);break;case"u":j(s.ulist);break;case"h":j(s.heading);break;case"r":j(s.hr);break;case"y":j(s.redo);break;case"z":j(a.shiftKey?s.redo:s.undo);break;default:return}a.preventDefault&&a.preventDefault(),window.event&&(window.event.returnValue=!1)}}),i.addEvent(r,"keyup",function(a){if(a.shiftKey&&!a.ctrlKey&&!a.metaKey){var b=a.charCode||a.keyCode;if(13===b){var c={};c.textOp=m("doAutoindent"),j(c)}}}),p.isIE&&i.addEvent(r,"keydown",function(a){var b=a.keyCode;if(27===b)return!1}),this.setUndoRedoButtonStates=q}function g(a,b){this.hooks=a,this.getString=b}function h(a){return a.replace(/^\s*(.*?)(?:\s+"(.+)")?\s*$/,function(a,b,c){return b=b.replace(/\?.*$/,function(a){return a.replace(/\+/g," ")}),b=decodeURIComponent(b),b=encodeURI(b).replace(/'/g,"%27").replace(/\(/g,"%28").replace(/\)/g,"%29"),b=b.replace(/\?.*$/,function(a){return a.replace(/\+/g,"%2b")}),c&&(c=c.trim?c.trim():c.replace(/^\s*/,"").replace(/\s*$/,""),c=c.replace(/"/g,"quot;").replace(/\(/g,"&#40;").replace(/\)/g,"&#41;").replace(/</g,"&lt;").replace(/>/g,"&gt;")),c?b+' "'+c+'"':b})}var i={},j={},k={},l=window.document,m=window.RegExp,n=window.navigator,o={lineLength:72},p={isIE:/msie/.test(n.userAgent.toLowerCase()),isIE_5or6:/msie 6/.test(n.userAgent.toLowerCase())||/msie 5/.test(n.userAgent.toLowerCase()),isOpera:/opera/.test(n.userAgent.toLowerCase())},q={bold:"Strong <strong> Ctrl+B",boldexample:"strong text",italic:"Emphasis <em> Ctrl+I",italicexample:"emphasized text",link:"Hyperlink <a> Ctrl+L",linkdescription:"enter link description here",linkdialog:'<p><b>Insert Hyperlink</b></p><p>http://example.com/ "optional title"</p>',quote:"Blockquote <blockquote> Ctrl+Q",quoteexample:"Blockquote",code:"Code Sample <pre><code> Ctrl+K",codeexample:"enter code here",image:"Image <img> Ctrl+G",imagedescription:"enter image description here",imagedialog:"<p><b>Insert Image</b></p><p>http://example.com/images/diagram.jpg \"optional title\"<br><br>Need <a href='http://www.google.com/search?q=free+image+hosting' target='_blank'>free image hosting?</a></p>",olist:"Numbered List <ol> Ctrl+O",ulist:"Bulleted List <ul> Ctrl+U",litem:"List item",heading:"Heading <h1>/<h2> Ctrl+H",headingexample:"Heading",hr:"Horizontal Rule <hr> Ctrl+R",undo:"Undo - Ctrl+Z",redo:"Redo - Ctrl+Y",redomac:"Redo - Ctrl+Shift+Z",help:"Markdown Editing Help"},r="http://";Markdown.Editor=function(a,d,h){h=h||{},"function"==typeof h.handler&&(h={helpButton:h}),h.strings=h.strings||{},h.helpButton&&(h.strings.help=h.strings.help||h.helpButton.title);var i=function(a){return h.strings[a]||q[a]};d=d||"";var j=this.hooks=new Markdown.HookCollection;j.addNoop("onPreviewRefresh"),j.addNoop("postBlockquoteCreation"),j.addFalse("insertImageDialog"),this.getConverter=function(){return a};var k,m=this;this.run=function(){if(!k){k=new b(d);var n=new g(j,i);Globals.markdownCommandManager=n;var o,p,q=new e(a,k,function(){j.onPreviewRefresh()});/\?noundo/.test(l.location.href)||(o=new c(function(){q.refresh(),p&&p.setUndoRedoButtonStates()},k),this.textOperation=function(a){o.setCommandMode(),a(),m.refreshPreview()}),p=new f(d,k,o,q,n,h.helpButton,i),p.setUndoRedoButtonStates();var r=m.refreshPreview=function(){q.refresh(!0)};r()}}},a.prototype.findTags=function(a,b){var c,d=this;a&&(c=i.extendRegExp(a,"","$"),this.before=this.before.replace(c,function(a){return d.startTag=d.startTag+a,""}),c=i.extendRegExp(a,"^",""),this.selection=this.selection.replace(c,function(a){return d.startTag=d.startTag+a,""})),b&&(c=i.extendRegExp(b,"","$"),this.selection=this.selection.replace(c,function(a){return d.endTag=a+d.endTag,""}),c=i.extendRegExp(b,"^",""),this.after=this.after.replace(c,function(a){return d.endTag=a+d.endTag,""}))},a.prototype.trimWhitespace=function(a){var b,c,d=this;a?b=c="":(b=function(a){return d.before+=a,""},c=function(a){return d.after=a+d.after,""}),this.selection=this.selection.replace(/^(\s*)/,b).replace(/(\s*)$/,c)},a.prototype.skipLines=function(a,b,c){void 0===a&&(a=1),void 0===b&&(b=1),a++,b++;var d,e;if(navigator.userAgent.match(/Chrome/)&&"X".match(/()./),this.selection=this.selection.replace(/(^\n*)/,""),this.startTag=this.startTag+m.$1,this.selection=this.selection.replace(/(\n*$)/,""),this.endTag=this.endTag+m.$1,this.startTag=this.startTag.replace(/(^\n*)/,""),this.before=this.before+m.$1,this.endTag=this.endTag.replace(/(\n*$)/,""),this.after=this.after+m.$1,this.before){for(d=e="";a--;)d+="\\n?",e+="\n";c&&(d="\\n*"),this.before=this.before.replace(new m(d+"$",""),e)}if(this.after){for(d=e="";b--;)d+="\\n?",e+="\n";c&&(d="\\n*"),this.after=this.after.replace(new m(d,""),e)}},i.isVisible=function(a){return window.getComputedStyle?"none"!==window.getComputedStyle(a,null).getPropertyValue("display"):a.currentStyle?"none"!==a.currentStyle.display:void 0},i.addEvent=function(a,b,c){a.attachEvent?a.attachEvent("on"+b,c):a.addEventListener(b,c,!1)},i.removeEvent=function(a,b,c){a.detachEvent?a.detachEvent("on"+b,c):a.removeEventListener(b,c,!1)},i.fixEolChars=function(a){return a=a.replace(/\r\n/g,"\n"),a=a.replace(/\r/g,"\n")},i.extendRegExp=function(a,b,c){null!==b&&void 0!==b||(b=""),null!==c&&void 0!==c||(c="");var d,e=a.toString();return e=e.replace(/\/([gim]*)$/,function(a,b){return d=b,""}),e=e.replace(/(^\/|\/$)/g,""),e=b+e+c,new m(e,d)},j.getTop=function(a,b){var c=a.offsetTop;if(!b)for(;a=a.offsetParent;)c+=a.offsetTop;return c},j.getHeight=function(a){return a.offsetHeight||a.scrollHeight},j.getWidth=function(a){return a.offsetWidth||a.scrollWidth},j.getPageSize=function(){var a,b,c,d;self.innerHeight&&self.scrollMaxY?(a=l.body.scrollWidth,b=self.innerHeight+self.scrollMaxY):l.body.scrollHeight>l.body.offsetHeight?(a=l.body.scrollWidth,b=l.body.scrollHeight):(a=l.body.offsetWidth,b=l.body.offsetHeight),self.innerHeight?(c=self.innerWidth,d=self.innerHeight):l.documentElement&&l.documentElement.clientHeight?(c=l.documentElement.clientWidth,d=l.documentElement.clientHeight):l.body&&(c=l.body.clientWidth,d=l.body.clientHeight);var e=Math.max(a,c),f=Math.max(b,d);return[e,f,c,d]},k.createBackground=function(){var a=l.createElement("div"),b=a.style;a.className="wmd-prompt-background",b.position="absolute",b.top="0",b.zIndex="1000",p.isIE?b.filter="alpha(opacity=50)":b.opacity="0.5";var c=j.getPageSize();return b.height=c[1]+"px",p.isIE?(b.left=l.documentElement.scrollLeft,b.width=l.documentElement.clientWidth):(b.left="0",b.width="100%"),l.body.appendChild(a),a},k.prompt=function(a,b,c){var d,e;void 0===b&&(b="");var f=function(a){var b=a.charCode||a.keyCode;27===b&&g(!0)},g=function(a){i.removeEvent(l.body,"keydown",f);var b=e.value;return a?b=null:(b=b.replace(/^http:\/\/(https?|ftp):\/\//,"$1://"),/^(?:https?|ftp):\/\//.test(b)||(b="http://"+b)),d.parentNode.removeChild(d),c(b),!1},h=function(){d=l.createElement("div"),d.className="wmd-prompt-dialog",d.style.padding="10px;",d.style.position="fixed",d.style.width="400px",d.style.zIndex="1001";var c=l.createElement("div");c.innerHTML=a,c.style.padding="5px",d.appendChild(c);var h=l.createElement("form"),k=h.style;h.onsubmit=function(){return g(!1)},k.padding="0",k.margin="0",k.cssFloat="left",k.width="100%",k.textAlign="center",k.position="relative",d.appendChild(h),e=l.createElement("input"),e.type="text",e.value=b,k=e.style,k.display="block",k.width="80%",k.marginLeft=k.marginRight="auto",h.appendChild(e);var m=l.createElement("input");m.type="button",m.onclick=function(){return g(!1)},m.value="OK",k=m.style,k.margin="10px",k.display="inline",k.width="7em";var n=l.createElement("input");n.type="button",n.onclick=function(){return g(!0)},n.value="Cancel",k=n.style,k.margin="10px",k.display="inline",k.width="7em",h.appendChild(m),h.appendChild(n),i.addEvent(l.body,"keydown",f),d.style.top="50%",d.style.left="50%",d.style.display="block",p.isIE_5or6&&(d.style.position="absolute",d.style.top=l.documentElement.scrollTop+200+"px",d.style.left="50%"),l.body.appendChild(d),d.style.marginTop=-(j.getHeight(d)/2)+"px",d.style.marginLeft=-(j.getWidth(d)/2)+"px"};setTimeout(function(){h();var a=b.length;if(void 0!==e.selectionStart)e.selectionStart=0,e.selectionEnd=a;else if(e.createTextRange){var c=e.createTextRange();c.collapse(!1),c.moveStart("character",-a),c.moveEnd("character",a),c.select()}e.focus()},0)};var s=g.prototype;Markdown.Editor.commandProto=s,s.prefixes="(?:\\s{4,}|\\s*>|\\s*-\\s+|\\s*\\d+\\.|=|\\+|-|_|\\*|#|\\s*\\[[^\n]]+\\]:)",s.unwrap=function(a){var b=new m("([^\\n])\\n(?!(\\n|"+this.prefixes+"))","g");a.selection=a.selection.replace(b,"$1 $2")},s.wrap=function(a,b){this.unwrap(a);var c=new m("(.{1,"+b+"})( +|$\\n?)","gm"),d=this;a.selection=a.selection.replace(c,function(a,b){return new m("^"+d.prefixes,"").test(a)?a:b+"\n"}),a.selection=a.selection.replace(/\s+$/,"")},s.doBold=function(a,b){return this.doBorI(a,b,2,this.getString("boldexample"))},s.doItalic=function(a,b){return this.doBorI(a,b,1,this.getString("italicexample"))},s.doBorI=function(a,b,c,d){a.trimWhitespace(),a.selection=a.selection.replace(/\n{2,}/g,"\n");var e=/(\**$)/.exec(a.before)[0],f=/(^\**)/.exec(a.after)[0],g=Math.min(e.length,f.length);if(g>=c&&(2!=g||1!=c))a.before=a.before.replace(m("[*]{"+c+"}$",""),""),a.after=a.after.replace(m("^[*]{"+c+"}",""),"");else if(!a.selection&&f){a.after=a.after.replace(/^([*_]*)/,""),a.before=a.before.replace(/(\s?)$/,"");var h=m.$1;a.before=a.before+f+h}else{a.selection||f||(a.selection=d);var i=c<=1?"*":"**";a.before=a.before+i,a.after=i+a.after}},s.stripLinkDefs=function(a,b){return a=a.replace(/^[ ]{0,3}\[(\d+)\]:[ \t]*\n?[ \t]*<?(\S+?)>?[ \t]*\n?[ \t]*(?:(\n*)["(](.+?)[")][ \t]*)?(?:\n+|$)/gm,function(a,c,d,e,f){return b[c]=a.replace(/\s*$/,""),e?(b[c]=a.replace(/["(](.+?)[")]$/,""),e+f):""})},s.addLinkDef=function(a,b,c){var d=0,e={};a.before=this.stripLinkDefs(a.before,e),a.selection=this.stripLinkDefs(a.selection,e),a.after=this.stripLinkDefs(a.after,e);var f="",g=/(\[)((?:\[[^\]]*\]|[^\[\]])*)(\][ ]?(?:\n[ ]*)?\[)(\d+)(\])/g,h=function(a){d++,c=c?c:d,a=a.replace(/^[ ]{0,3}\[(\d+)\]:/,"  ["+c+"]:"),f+="\n"+a},i=function(a,b,c,f,j,k){return c=c.replace(g,i),e[j]?(h(e[j]),b+c+f+d+k):a};a.before=a.before.replace(g,i),b?h(b):a.selection=a.selection.replace(g,i);var j=c;return a.after=a.after.replace(g,i),a.after&&(a.after=a.after.replace(/\n*$/,"")),a.after||(a.selection=a.selection.replace(/\n*$/,"")),a.after+="\n\n"+f,j},s.doLinkOrImage=function(a,b,c,d,e,f){a.trimWhitespace(),a.findTags(/\s*!?\[/,/\][ ]?(?:\n[ ]*)?(\[.*?\])?/);var g;if(!(a.endTag.length>1&&a.startTag.length>0)){if(a.selection=a.startTag+a.selection+a.endTag,a.startTag=a.endTag="",/\n\n/.test(a.selection))return void this.addLinkDef(a,null);var i=this,j=function(d){if(g.parentNode.removeChild(g),null!==d){a.selection=(" "+a.selection).replace(/([^\\](?:\\\\)*)(?=[[\]])/g,"$1\\").substr(1);var j=" [999]: "+h(d),k=i.addLinkDef(a,j,e);a.startTag=c?"![":"[",a.endTag="]["+k+"]";var l=f?f:d;a.selection||(c?a.selection=l:a.selection=i.getString("linkdescription"))}b()};return g=k.createBackground(),c?j(d):k.prompt(this.getString("linkdialog"),r,j),!0}a.startTag=a.startTag.replace(/!?\[/,""),a.endTag="",this.addLinkDef(a,null)},s.doCustomImage=function(a,b,c,d,e,f){a.trimWhitespace(),a.findTags(/\s*!?\[/,/\][ ]?(?:\n[ ]*)?(\[.*?\])?/);var g;if(!(a.endTag.length>1&&a.startTag.length>0)){if(a.selection=a.startTag+a.selection+a.endTag,a.startTag=a.endTag="",/\n\n/.test(a.selection))return void this.addLinkDef(a,null);var i=this,j=function(d){if(g.parentNode.removeChild(g),null!==d){a.selection=(" "+a.selection).replace(/([^\\](?:\\\\)*)(?=[[\]])/g,"$1\\").substr(1);" [999]: "+h(d);a.startTag=c?"![":"[",a.endTag="]("+d+") ";var e=f?f:d;a.selection||(c?a.selection=e:a.selection=i.getString("linkdescription"))}b()};return g=k.createBackground(),c?j(d):k.prompt(this.getString("linkdialog"),r,j),!0}a.startTag=a.startTag.replace(/!?\[/,""),a.endTag="",this.addLinkDef(a,null)},s.doImage=Globals.doimage,s.doAutoindent=function(a,b){var c=this,d=!1;a.before=a.before.replace(/(\n|^)[ ]{0,3}([*+-]|\d+[.])[ \t]*\n$/,"\n\n"),a.before=a.before.replace(/(\n|^)[ ]{0,3}>[ \t]*\n$/,"\n\n"),a.before=a.before.replace(/(\n|^)[ \t]+\n$/,"\n\n"),a.selection||/^[ \t]*(?:\n|$)/.test(a.after)||(a.after=a.after.replace(/^[^\n]*/,function(b){return a.selection=b,""}),d=!0),/(\n|^)[ ]{0,3}([*+-]|\d+[.])[ \t]+.*\n$/.test(a.before)&&c.doList&&c.doList(a),/(\n|^)[ ]{0,3}>[ \t]+.*\n$/.test(a.before)&&c.doBlockquote&&c.doBlockquote(a),/(\n|^)(\t|[ ]{4,}).*\n$/.test(a.before)&&c.doCode&&c.doCode(a),d&&(a.after=a.selection+a.after,a.selection="")},s.doBlockquote=function(a,b){a.selection=a.selection.replace(/^(\n*)([^\r]+?)(\n*)$/,function(b,c,d,e){return a.before+=c,a.after=e+a.after,d}),a.before=a.before.replace(/(>[ \t]*)$/,function(b,c){return a.selection=c+a.selection,""}),a.selection=a.selection.replace(/^(\s|>)+$/,""),a.selection=a.selection||this.getString("quoteexample");var c,d="",e="";if(a.before){for(var f=a.before.replace(/\n$/,"").split("\n"),g=!1,h=0;h<f.length;h++){var i=!1;c=f[h],g=g&&c.length>0,/^>/.test(c)?(i=!0,!g&&c.length>1&&(g=!0)):i=!!/^[ \t]*$/.test(c)||g,i?d+=c+"\n":(e+=d+c,d="\n")}/(^|\n)>/.test(d)||(e+=d,d="")}a.startTag=d,a.before=e,a.after&&(a.after=a.after.replace(/^\n?/,"\n")),a.after=a.after.replace(/^(((\n|^)(\n[ \t]*)*>(.+\n)*.*)+(\n[ \t]*)*)/,function(b){return a.endTag=b,""});var j=function(b){var c=b?"> ":"";a.startTag&&(a.startTag=a.startTag.replace(/\n((>|\s)*)\n$/,function(a,b){return"\n"+b.replace(/^[ ]{0,3}>?[ \t]*$/gm,c)+"\n"})),a.endTag&&(a.endTag=a.endTag.replace(/^\n((>|\s)*)\n/,function(a,b){return"\n"+b.replace(/^[ ]{0,3}>?[ \t]*$/gm,c)+"\n"}))};/^(?![ ]{0,3}>)/m.test(a.selection)?(this.wrap(a,o.lineLength-2),a.selection=a.selection.replace(/^/gm,"> "),j(!0),a.skipLines()):(a.selection=a.selection.replace(/^[ ]{0,3}> ?/gm,""),this.unwrap(a),j(!1),!/^(\n|^)[ ]{0,3}>/.test(a.selection)&&a.startTag&&(a.startTag=a.startTag.replace(/\n{0,2}$/,"\n\n")),!/(\n|^)[ ]{0,3}>.*$/.test(a.selection)&&a.endTag&&(a.endTag=a.endTag.replace(/^\n{0,2}/,"\n\n"))),a.selection=this.hooks.postBlockquoteCreation(a.selection),/\n/.test(a.selection)||(a.selection=a.selection.replace(/^(> *)/,function(b,c){return a.startTag+=c,""}))},s.doCode=function(a,b){var c=/\S[ ]*$/.test(a.before),d=/^[ ]*\S/.test(a.after);if(!d&&!c||/\n/.test(a.selection)){a.before=a.before.replace(/[ ]{4}$/,function(b){return a.selection=b+a.selection,""});var e=1,f=1;/(\n|^)(\t|[ ]{4,}).*\n$/.test(a.before)&&(e=0),/^\n(\t|[ ]{4,})/.test(a.after)&&(f=0),a.skipLines(e,f),a.selection?/^[ ]{0,3}\S/m.test(a.selection)?a.selection="```\n"+a.selection+"\n```":a.selection=a.selection.replace(/^(?:[ ]{4}|[ ]{0,3}\t)/gm,""):(a.startTag="```\n",a.selection=this.getString("codeexample"),a.endTag="\n```")}else a.trimWhitespace(),a.findTags(/`/,/`/),a.startTag||a.endTag?a.endTag&&!a.startTag?(a.before+=a.endTag,a.endTag=""):a.startTag=a.endTag="":(a.startTag=a.endTag="`",a.selection||(a.selection=this.getString("codeexample")))},s.doList=function(a,b,c){var d=/(\n|^)(([ ]{0,3}([*+-]|\d+[.])[ \t]+.*)(\n.+|\n{2,}([*+-].*|\d+[.])[ \t]+.*|\n{2,}[ \t]+\S.*)*)\n*$/,e=/^\n*(([ ]{0,3}([*+-]|\d+[.])[ \t]+.*)(\n.+|\n{2,}([*+-].*|\d+[.])[ \t]+.*|\n{2,}[ \t]+\S.*)*)\n*/,f="-",g=1,h=function(){var a;return c?(a=" "+g+". ",g++):a=" "+f+" ",a},i=function(a){return void 0===c&&(c=/^\s*\d/.test(a)),a=a.replace(/^[ ]{0,3}([*+-]|\d+[.])\s/gm,function(a){return h()})};if(a.findTags(/(\n|^)*[ ]{0,3}([*+-]|\d+[.])\s+/,null),!a.before||/\n$/.test(a.before)||/^\n/.test(a.startTag)||(a.before+=a.startTag,a.startTag=""),a.startTag){var j=/\d+[.]/.test(a.startTag);if(a.startTag="",a.selection=a.selection.replace(/\n[ ]{4}/g,"\n"),this.unwrap(a),a.skipLines(),j&&(a.after=a.after.replace(e,i)),c==j)return}var k=1;a.before=a.before.replace(d,function(a){return/^\s*([*+-])/.test(a)&&(f=m.$1),k=/[^\n]\n\n[^\n]/.test(a)?1:0,i(a)}),a.selection||(a.selection=this.getString("litem"));var l=h(),n=1;a.after=a.after.replace(e,function(a){return n=/[^\n]\n\n[^\n]/.test(a)?1:0,i(a)}),a.trimWhitespace(!0),a.skipLines(k,n,!0),a.startTag=l;var p=l.replace(/./g," ");this.wrap(a,o.lineLength-p.length),a.selection=a.selection.replace(/\n/g,"\n"+p)},s.doHeading=function(a,b){if(a.selection=a.selection.replace(/\s+/g," "),a.selection=a.selection.replace(/(^\s+|\s+$)/g,""),!a.selection)return a.startTag="## ",a.selection=this.getString("headingexample"),void(a.endTag=" ##");var c=0;a.findTags(/#+[ ]*/,/[ ]*#+/),/#+/.test(a.startTag)&&(c=m.lastMatch.length),a.startTag=a.endTag="",a.findTags(null,/\s?(-+|=+)/),/=+/.test(a.endTag)&&(c=1),/-+/.test(a.endTag)&&(c=2),a.startTag=a.endTag="",a.skipLines(1,1);var d=0==c?2:c-1;if(d>0){var e=d>=2?"-":"=",f=a.selection.length;for(f>o.lineLength&&(f=o.lineLength),a.endTag="\n";f--;)a.endTag+=e}},s.doHorizontalRule=function(a,b){a.startTag="----------\n",a.selection="",a.skipLines(2,1,!0)}}(),function(){function a(a){this.tokens=[],this.tokens.links={},this.options=a||h.defaults,this.rules=i.normal,this.options.gfm&&(this.options.tables?this.rules=i.tables:this.rules=i.gfm)}function b(a,b){if(this.options=b||h.defaults,this.links=a,this.rules=j.normal,!this.links)throw new Error("Tokens array requires a `links` property.");this.options.gfm?this.options.breaks?this.rules=j.breaks:this.rules=j.gfm:this.options.pedantic&&(this.rules=j.pedantic)}function c(a){this.tokens=[],this.token=null,this.options=a||h.defaults}function d(a,b){return a.replace(b?/&/g:/&(?!#?\w+;)/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;")}function e(a,b){return a=a.source,b=b||"",function c(d,e){return d?(e=e.source||e,e=e.replace(/(^|[^\[])\^/g,"$1"),a=a.replace(d,e),c):new RegExp(a,b)}}function f(){}function g(a){for(var b,c,d=1;d<arguments.length;d++){b=arguments[d];for(c in b)Object.prototype.hasOwnProperty.call(b,c)&&(a[c]=b[c])}return a}function h(b,e){try{return e&&(e=g({},h.defaults,e)),c.parse(a.lex(b,e),e)}catch(a){if(a.message+="\nPlease report this to https://github.com/chjj/marked.",(e||h.defaults).silent)return"<p>An error occured:</p><pre>"+d(a.message+"",!0)+"</pre>";throw a}}var i={newline:/^\n+/,fences:f,hr:/^( *[-*_]){3,} *(?:\n+|$)/,heading:/^ *(#{1,6}) *([^\n]+?) *#* *(?:\n+|$)/,nptable:f,lheading:/^([^\n]+)\n *(=|-){3,} *\n*/,blockquote:/^( *>[^\n]+(\n[^\n]+)*\n*)+/,list:/^( *)(bull) [\s\S]+?(?:hr|\n{2,}(?! )(?!\1bull )\n*|\s*$)/,html:/^ *(?:comment|closed|closing) *(?:\n{2,}|\s*$)/,def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +["(]([^\n]+)[")])? *(?:\n+|$)/,table:f,paragraph:/^((?:[^\n]+\n?(?!hr|heading|lheading|blockquote|tag|def))+)\n*/,text:/^[^\n]+/};i.bullet=/(?:[*+-]|\d+\.)/,i.item=/^( *)(bull) [^\n]*(?:\n(?!\1bull )[^\n]*)*/,i.item=e(i.item,"gm")(/bull/g,i.bullet)(),i.list=e(i.list)(/bull/g,i.bullet)("hr",/\n+(?=(?: *[-*_]){3,} *(?:\n+|$))/)(),i._tag="(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:/|@)\\b",i.html=e(i.html)("comment",/<!--[\s\S]*?-->/)("closed",/<(tag)[\s\S]+?<\/\1>/)("closing",/<tag(?:"[^"]*"|'[^']*'|[^'">])*?>/)(/tag/g,i._tag)(),i.paragraph=e(i.paragraph)("hr",i.hr)("heading",i.heading)("lheading",i.lheading)("blockquote",i.blockquote)("tag","<"+i._tag)("def",i.def)(),i.normal=g({},i),i.gfm=g({},i.normal,{fences:/^ *(`{3,}|~{3,}) *(\w+)? *\n([\s\S]+?)\s*\1 *(?:\n+|$)/,paragraph:/^/}),i.gfm.paragraph=e(i.paragraph)("(?!","(?!"+i.gfm.fences.source.replace("\\1","\\2")+"|")(),i.tables=g({},i.gfm,{nptable:/^ *(\S.*\|.*)\n *([-:]+ *\|[-| :]*)\n((?:.*\|.*(?:\n|$))*)\n*/,table:/^ *\|(.+)\n *\|( *[-:]+[-| :]*)\n((?: *\|.*(?:\n|$))*)\n*/}),a.rules=i,a.lex=function(b,c){var d=new a(c);return d.lex(b)},a.prototype.lex=function(a){return a=a.replace(/\r\n|\r/g,"\n").replace(/\t/g,"    ").replace(/\u00a0/g," ").replace(/\u2424/g,"\n"),this.token(a,!0)},a.prototype.token=function(a,b){for(var c,d,e,f,g,h,j,k,l,a=a.replace(/^ +$/gm,"");a;)if((e=this.rules.newline.exec(a))&&(a=a.substring(e[0].length),e[0].length>1&&this.tokens.push({type:"space"})),e=this.rules.fences.exec(a))a=a.substring(e[0].length),this.tokens.push({type:"code",lang:e[2],text:e[3]});else if(e=this.rules.heading.exec(a))a=a.substring(e[0].length),this.tokens.push({type:"heading",depth:e[1].length,text:e[2]});else if(b&&(e=this.rules.nptable.exec(a))){for(a=a.substring(e[0].length),h={type:"table",header:e[1].replace(/^ *| *\| *$/g,"").split(/ *\| */),align:e[2].replace(/^ *|\| *$/g,"").split(/ *\| */),cells:e[3].replace(/\n$/,"").split("\n")},k=0;k<h.align.length;k++)/^ *-+: *$/.test(h.align[k])?h.align[k]="right":/^ *:-+: *$/.test(h.align[k])?h.align[k]="center":/^ *:-+ *$/.test(h.align[k])?h.align[k]="left":h.align[k]=null;for(k=0;k<h.cells.length;k++)h.cells[k]=h.cells[k].split(/ *\| */);this.tokens.push(h)}else if(e=this.rules.lheading.exec(a))a=a.substring(e[0].length),this.tokens.push({type:"heading",depth:"="===e[2]?1:2,text:e[1]});else if(e=this.rules.hr.exec(a))a=a.substring(e[0].length),this.tokens.push({type:"hr"});else if(e=this.rules.blockquote.exec(a))a=a.substring(e[0].length),this.tokens.push({type:"blockquote_start"}),e=e[0].replace(/^ *> ?/gm,""),this.token(e,b),this.tokens.push({type:"blockquote_end"});else if(e=this.rules.list.exec(a)){for(a=a.substring(e[0].length),f=e[2],this.tokens.push({type:"list_start",ordered:f.length>1}),e=e[0].match(this.rules.item),c=!1,l=e.length,k=0;k<l;k++)h=e[k],j=h.length,h=h.replace(/^ *([*+-]|\d+\.) +/,""),~h.indexOf("\n ")&&(j-=h.length,h=this.options.pedantic?h.replace(/^ {1,4}/gm,""):h.replace(new RegExp("^ {1,"+j+"}","gm"),"")),this.options.smartLists&&k!==l-1&&(g=i.bullet.exec(e[k+1])[0],f===g||f.length>1&&g.length>1||(a=e.slice(k+1).join("\n")+a,k=l-1)),d=c||/\n\n(?!\s*$)/.test(h),k!==l-1&&(c="\n"===h[h.length-1],d||(d=c)),this.tokens.push({type:d?"loose_item_start":"list_item_start"}),this.token(h,!1),this.tokens.push({type:"list_item_end"});this.tokens.push({type:"list_end"})}else if(e=this.rules.html.exec(a))a=a.substring(e[0].length),this.tokens.push({type:this.options.sanitize?"paragraph":"html",pre:"pre"===e[1],text:e[0]});else if(b&&(e=this.rules.def.exec(a)))a=a.substring(e[0].length),this.tokens.links[e[1].toLowerCase()]={href:e[2],title:e[3]};else if(b&&(e=this.rules.table.exec(a))){for(a=a.substring(e[0].length),h={type:"table",header:e[1].replace(/^ *| *\| *$/g,"").split(/ *\| */),align:e[2].replace(/^ *|\| *$/g,"").split(/ *\| */),cells:e[3].replace(/(?: *\| *)?\n$/,"").split("\n")},k=0;k<h.align.length;k++)/^ *-+: *$/.test(h.align[k])?h.align[k]="right":/^ *:-+: *$/.test(h.align[k])?h.align[k]="center":/^ *:-+ *$/.test(h.align[k])?h.align[k]="left":h.align[k]=null;for(k=0;k<h.cells.length;k++)h.cells[k]=h.cells[k].replace(/^ *\| *| *\| *$/g,"").split(/ *\| */);this.tokens.push(h)}else if(b&&(e=this.rules.paragraph.exec(a)))a=a.substring(e[0].length),this.tokens.push({type:"paragraph",text:"\n"===e[1][e[1].length-1]?e[1].slice(0,-1):e[1]});else if(e=this.rules.text.exec(a))a=a.substring(e[0].length),this.tokens.push({type:"text",text:e[0]});else if(a)throw new Error("Infinite loop on byte: "+a.charCodeAt(0));return this.tokens};var j={escape:/^\\([\\`*{}\[\]()#+\-.!_>])/,autolink:/^<([^ >]+(@|:\/)[^ >]+)>/,url:f,tag:/^<!--[\s\S]*?-->|^<\/?\w+(?:"[^"]*"|'[^']*'|[^'">])*?>/,link:/^!?\[(inside)\]\(href\)/,reflink:/^!?\[(inside)\]\s*\[([^\]]*)\]/,nolink:/^!?\[((?:\[[^\]]*\]|[^\[\]])*)\]/,strong:/^__([\s\S]+?)__(?!_)|^\*\*([\s\S]+?)\*\*(?!\*)/,em:/^\b_((?:__|[\s\S])+?)_\b|^\*((?:\*\*|[\s\S])+?)\*(?!\*)/,code:/^(`+)\s*([\s\S]*?[^`])\s*\1(?!`)/,br:/^ {2,}\n(?!\s*$)/,del:f,text:/^[\s\S]+?(?=[\\<!\[_*`]| {2,}\n|$)/};j._inside=/(?:\[[^\]]*\]|[^\]]|\](?=[^\[]*\]))*/,j._href=/\s*<?([^\s]*?)>?(?:\s+['"]([\s\S]*?)['"])?\s*/,j.link=e(j.link)("inside",j._inside)("href",j._href)(),j.reflink=e(j.reflink)("inside",j._inside)(),j.normal=g({},j),j.pedantic=g({},j.normal,{strong:/^__(?=\S)([\s\S]*?\S)__(?!_)|^\*\*(?=\S)([\s\S]*?\S)\*\*(?!\*)/,em:/^_(?=\S)([\s\S]*?\S)_(?!_)|^\*(?=\S)([\s\S]*?\S)\*(?!\*)/}),j.gfm=g({},j.normal,{escape:e(j.escape)("])","~|])")(),url:/^(https?:\/\/[^\s<]+[^<.,:;"')\]\s])/,del:/^~~(?=\S)([\s\S]*?\S)~~/,text:e(j.text)("]|","~]|")("|","|https?://|")()}),j.breaks=g({},j.gfm,{br:e(j.br)("{2,}","*")(),text:e(j.gfm.text)("{2,}","*")()}),b.rules=j,b.output=function(a,c,d){var e=new b(c,d);return e.output(a)},b.prototype.output=function(a){for(var b,c,e,f,g="";a;)if(f=this.rules.escape.exec(a))a=a.substring(f[0].length),g+=f[1];else if(f=this.rules.autolink.exec(a))a=a.substring(f[0].length),"@"===f[2]?(c=":"===f[1][6]?this.mangle(f[1].substring(7)):this.mangle(f[1]),e=this.mangle("mailto:")+c):(c=d(f[1]),e=c),g+='<a href="'+e+'">'+c+"</a>";else if(f=this.rules.url.exec(a))a=a.substring(f[0].length),c=d(f[1]),e=c,g+='<a href="'+e+'">'+c+"</a>";else if(f=this.rules.tag.exec(a))a=a.substring(f[0].length),g+=this.options.sanitize?d(f[0]):f[0];else if(f=this.rules.link.exec(a))a=a.substring(f[0].length),g+=this.outputLink(f,{href:f[2],title:f[3]});else if((f=this.rules.reflink.exec(a))||(f=this.rules.nolink.exec(a))){if(a=a.substring(f[0].length),b=(f[2]||f[1]).replace(/\s+/g," "),b=this.links[b.toLowerCase()],!b||!b.href){g+=f[0][0],a=f[0].substring(1)+a;continue}g+=this.outputLink(f,b)}else if(f=this.rules.strong.exec(a))a=a.substring(f[0].length),g+="<strong>"+this.output(f[2]||f[1])+"</strong>";else if(f=this.rules.em.exec(a))a=a.substring(f[0].length),g+="<em>"+this.output(f[2]||f[1])+"</em>";else if(f=this.rules.code.exec(a))a=a.substring(f[0].length),g+="<code>"+d(f[2],!0)+"</code>";else if(f=this.rules.br.exec(a))a=a.substring(f[0].length),g+="<br>";else if(f=this.rules.del.exec(a))a=a.substring(f[0].length),g+="<del>"+this.output(f[1])+"</del>";else if(f=this.rules.text.exec(a))a=a.substring(f[0].length),g+=d(f[0]);else if(a)throw new Error("Infinite loop on byte: "+a.charCodeAt(0));return g},b.prototype.outputLink=function(a,b){return"!"!==a[0][0]?'<a href="'+d(b.href)+'"'+(b.title?' title="'+d(b.title)+'"':"")+">"+this.output(a[1])+"</a>":'<img src="'+d(b.href)+'" alt="'+d(a[1])+'"'+(b.title?' title="'+d(b.title)+'"':"")+">"},b.prototype.mangle=function(a){for(var b,c="",d=a.length,e=0;e<d;e++)b=a.charCodeAt(e),Math.random()>.5&&(b="x"+b.toString(16)),c+="&#"+b+";";return c},c.parse=function(a,b){var d=new c(b);return d.parse(a)},c.prototype.parse=function(a){this.inline=new b(a.links,this.options),this.tokens=a.reverse();for(var c="";this.next();)c+=this.tok();return c},c.prototype.next=function(){return this.token=this.tokens.pop()},c.prototype.peek=function(){return this.tokens[this.tokens.length-1]||0},c.prototype.parseText=function(){for(var a=this.token.text;"text"===this.peek().type;)a+="\n"+this.next().text;return this.inline.output(a)},c.prototype.tok=function(){switch(this.token.type){case"space":return"";case"hr":return"<hr>\n";case"heading":return"<h"+this.token.depth+">"+this.inline.output(this.token.text)+"</h"+this.token.depth+">\n";case"code":if(this.options.highlight){var a=this.options.highlight(this.token.text,this.token.lang);null!=a&&a!==this.token.text&&(this.token.escaped=!0,this.token.text=a)}return this.token.escaped||(this.token.text=d(this.token.text,!0)),'<pre class="prettyprint"><code'+(this.token.lang?' class="'+this.options.langPrefix+this.token.lang+'"':"")+">"+this.token.text+"</code></pre>\n";case"table":var b,c,e,f,g,h="";for(h+="<thead>\n<tr>\n",c=0;c<this.token.header.length;c++)b=this.inline.output(this.token.header[c]),h+=this.token.align[c]?'<th align="'+this.token.align[c]+'">'+b+"</th>\n":"<th>"+b+"</th>\n";for(h+="</tr>\n</thead>\n",h+="<tbody>\n",c=0;c<this.token.cells.length;c++){for(e=this.token.cells[c],h+="<tr>\n",g=0;g<e.length;g++)f=this.inline.output(e[g]),h+=this.token.align[g]?'<td align="'+this.token.align[g]+'">'+f+"</td>\n":"<td>"+f+"</td>\n";h+="</tr>\n"}return h+="</tbody>\n","<table>\n"+h+"</table>\n";case"blockquote_start":for(var h="";"blockquote_end"!==this.next().type;)h+=this.tok();return"<blockquote>\n"+h+"</blockquote>\n";case"list_start":for(var i=this.token.ordered?"ol":"ul",h="";"list_end"!==this.next().type;)h+=this.tok();return"<"+i+">\n"+h+"</"+i+">\n";case"list_item_start":for(var h="";"list_item_end"!==this.next().type;)h+="text"===this.token.type?this.parseText():this.tok();return"<li>"+h+"</li>\n";case"loose_item_start":for(var h="";"list_item_end"!==this.next().type;)h+=this.tok();return"<li>"+h+"</li>\n";case"html":return this.token.pre||this.options.pedantic?this.token.text:this.inline.output(this.token.text);case"paragraph":return"<p>"+this.inline.output(this.token.text)+"</p>\n";case"text":return"<p>"+this.parseText()+"</p>\n"}},f.exec=f,h.options=h.setOptions=function(a){return g(h.defaults,a),h},h.defaults={gfm:!0,tables:!0,breaks:!1,pedantic:!1,sanitize:!1,smartLists:!1,silent:!1,highlight:null,langPrefix:"lang-"},h.Parser=c,h.parser=c.parse,h.Lexer=a,h.lexer=a.lex,h.InlineLexer=b,h.inlineLexer=b.output,h.parse=h,"object"==typeof exports?module.exports=h:"function"==typeof define&&define.amd?define(function(){return h}):this.marked=h}.call(function(){return this||("undefined"!=typeof window?window:global)}());var Messages=function(){var a={};return a.get=function(a){if(a.length>0){var b=sessionStorage.getItem(a);return null!=b?b:"???"+a+"???"}},a.load=function(a,b){void 0===a&&(a=!0),$.ajax(MESSAGES_LOADER_URL,{async:a,success:function(a){for(var c=Object.keys(a.hashMap),d=0;d<c.length;d++){var e=c[d];sessionStorage.setItem(e,a.hashMap[e])}b()}})},{get:a.get,load:a.load}}();$(document).ready(function(){Messages.load(!0,function(){$(document).trigger("messages-loaded")})}),function(){var a="#tags";$(a).replaceWith('<input multiple type="hidden" class="bigdrop" id="tags" name="tagNames" style="width:100%" value="'+$(a).val()+'"/>');var b=$(a),c=function(a){return a},d=function(a){var c=!1;return $.each(b.val().split(","),function(b,d){d==a&&(c=!0)}),c},e={};b.select2({placeholder:Messages.get("tagmanager.search.placeholder"),minimumInputLength:3,multiple:!0,ajax:{dataType:"json",quietMillis:100,url:function(a,b){return CONTEXT_PATH+"/question/searchTags/"+a},results:function(a){return e={},{results:$.map(a,function(a){if(e[a.name.toLowerCase()]=!0,!d(a.name))return{text:a.name,slug:a.name,id:a.name,usage:a.usageCount,newVal:!1}})}}},createSearchChoice:function(a,b){var c=$(b).filter(function(){
return 0===this.text.localeCompare(a)}).length;return e[a.toLowerCase()]&&0==c?{}:0===c?{text:'<div class="tag-new-list">'+a+' <span class="tag-smalltext">('+Messages.get("tagmanager.create.new")+')</span></div><hr style="margin-top:15px;"/>',slug:a,id:a,newVal:!0}:void 0},initSelection:function(a,b){var c=$(a).val(),d=$.map(c.split(","),function(a){return""!=a?{id:a,text:a}:null});b(d)},escapeMarkup:c,formatResultCssClass:function(a){return a.newVal?"tag-new":"tag-found"},formatResult:function(a,b,d){return a.newVal?$.fn.select2.defaults.formatResult(a,b,d,c):'<a class="tag-brutal">'+a.id+"</a> x "+a.usage}}).on("select2-selecting",function(a){var b=a.choice;b.newVal?b.text=b.id+' <b class="tag-new-star">*</b>':b.text=b.id})}(),$(function(){$(document).on("messages-loaded",function(){jQuery.extend(jQuery.validator.messages,{required:Messages.get("org.hibernate.validator.constraints.NotEmpty.message"),email:Messages.get("org.hibernate.validator.constraints.Email.message"),equalTo:jQuery.validator.format(Messages.get("validator.not.equal")),minlength:jQuery.validator.format(Messages.get("validator.minimum.characters")),maxlength:jQuery.validator.format(Messages.get("validator.maximum.characters"))})}),$.validator.setDefaults({onkeyup:function(a){setTimeout(function(){$(a).valid()},2e3)}}),$.validator.addMethod("date",function(a,b){if(0==a.trim().length)return!0;var c=$(b).data("dateformat");if(0==c.length)return!0;var d="(0[1-9]|[12][0-9]|3[01])",e="(0[1-9]|1[0-2])",f="(19[1-9][0-9]|20[012][0-9])",g="^"+c.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")+"$";return g=g.replace(/dd/i,d),g=g.replace(/mm/i,e),g=g.replace(/yyyy/i,f),a.match(new RegExp(g))},Messages.get("validator.invalid.date")),$.validator.addMethod("brutal-url",function(a,b){return 0==a.length||a.match(/(www\.)?(.*\.)(.*)/)},Messages.get("validator.invalid.url")),$(".validated-form").each(function(){$(this).find("input").addClass("ignore")}),$(".validated-form").each(function(a,b){$(b).validate({rules:{passwordConfirmation:{equalTo:"#password"}}})})}),$(function(){$(".hintable").each(function(a,b){var c=$(b),d=c.data("hint-id"),e=$("label[for="+c.attr("id")+"]"),f=$("<a class='hint-anchor' href='#"+d+"'> ?</a>");f.appendTo(e)});var a=function(a){var b=$("#"+$(a).data("hint-id"));$(b).is(":visible")||($(".hint").hide(),b.fadeIn(500))};$(".hintable").focus(function(){a(this)}),$(".hintable").focusout(function(){var a=$(".answer-form > .hint");a.fadeOut(500)}),$("#question-title").focus()}),$(document).on("keyup",".comment-textarea",commentLengthCounter),$(function(){function a(){b($(".simple-ajax-form a"),"click",c),b($(".simple-ajax-form .cancel"),"click",d),b($("form.ajax"),"submit",e)}function b(a,b,c){a.off(b,c),a.on(b,c)}function c(a){a.preventDefault();var b=$(this).siblings(".ajax-form");b.toggleClass("hidden"),b.find(".to-focus").focus(),commentLengthCounter(b.find("form textarea"))}function d(a){a.preventDefault();var b=$(this).closest("form.ajax");f(b,!0)}function e(a){a.preventDefault(),g($(this))}function f(a,b){var c=a.parent();a.removeClass("inactive"),a.find("input[type='submit']").attr("disabled",!1),c.addClass("hidden"),b||a.find(".comment-textarea").val("")}function g(b){if(b.valid()){b.find(".submit").attr("disabled",!0),b.find(".cancel").attr("disabled",!1);var c=function(a){return f(b,!1),400==a.status?void errorPopup(Messages.get("error.occured"),b.parent(),"center-popup"):(errorPopup(Messages.get("error.occured"),b.parent(),"center-popup"),void console.log(a))},d=function(c,d,e){var g=$("#"+b.data("ajax-result")),h=b.data("ajax-on-callback")||"replace-inner";"replace-inner"==h?g.html(c):"append"==h?g.append(c):"replace"==h&&g.replaceWith(c),g.removeClass("hidden"),f(b,!1),a()},e=b.attr("action");$.ajax(e,{success:d,error:c,dataType:"html",data:b.serialize(),method:"POST"})}}a()}),$(function(){function a(a){function b(){c()&&d(g),d(f)}function c(){return e[0]!=h[0]}function d(a){a.toggleClass("solution-container").toggleClass("not-solution-container")}a.preventDefault();var e=$(this),f=$(e).parent(),g=$(".solution-container"),h=$(g).find(".mark-as-solution");$.ajax({url:e.attr("href"),method:"POST",beforeSend:function(){b()},error:function(a){b(),errorPopup(Messages.get("error.occured"),e,"center-popup"),console.log(a)}})}$(".mark-as-solution").on("click",a)}),$(function(){function a(a){function b(a){a.toggleClass("icon-muted"),a.toggleClass("icon-eye-off"),a.toggleClass("icon-eye"),a.hasClass("icon-muted")?a.attr("title",Messages.get("validation.follow_post")):a.attr("title",Messages.get("validation.cancel_follow_post"))}a.preventDefault();var c=$(this),d=c.find("span");$.ajax({url:c.attr("href"),method:"POST",beforeSend:function(){b(d)},error:function(a){errorPopup(Messages.get("error.occured"),c,"center-popup"),console.log(a)}})}$(".watch").on("click",a)}),$(function(){if(marked.setOptions({sanitize:!0}),$(".wmd-input").on("keyup",function(){var a=$(this),b=a.closest(".wmd").find(".md-preview");0==a.val().length?b.addClass("hidden"):(b.removeClass("hidden"),b.html(marked(a.val())))}),$(".wmd-panel").length>0){var a=Markdown.getSanitizingConverter(),b=new Markdown.Editor(a);b.run(),Globals.markdownEditor=b}}),$(".hide-next").click(function(){var a=$(this),b=$(a.next());"block"==b.css("display")?(b.css("display","none"),a.children().attr("class","icon-angle-right")):(b.css("display","block"),a.children().attr("class","icon-angle-down"))}),$(window).resize(function(){var a=$(".hide-next"),b=$(a.next());$(window).width()>=501?"none"==b.css("display")&&b.css("display","inline-block"):(b.css("display","none"),a.children().attr("class","icon-angle-right"))}),Modal.prototype.toggle=function(){this.element.toggleClass("hidden")},Modal.prototype.hide=function(){this.element.hide()},$(".vote-option").bind("click",function(){$(this).hasClass("stop")||($(this).hasClass("voted")?$(this).hasClass("voted")&&($(this).addClass("stop"),removeVote($(this))):($(this).addClass("stop"),vote($(this))))}),$(function(){$(".requires-karma").each(function(a,b){var b=$(b),c=!b.hasClass("author-cant"),d=parseInt(b.data("karma")),e=b.data("author");e=void 0!=e&&e,c&&e||!MODERATOR&&d>KARMA&&(b.off("click"),b.click(function(a){a.preventDefault(),errorPopup(Messages.get("need.to_have")+" "+d+" "+Messages.get("reputation_score")+"!",this)}))}),$(".author-cant").each(function(a,b){var b=$(b),c=b.data("author");c&&(b.off("click"),b.click(function(a){a.preventDefault(),errorPopup(Messages.get("error.author.cant_realize_operation"),this)}))}),LOGGED_IN||($(".requires-login").off("click"),$(".requires-login").bind("click",function(a){a.preventDefault(),errorPopup(Messages.get("auth.requires_login"),this)})),$(".iframe-load").click(function(){var a=$(this),b=$("<iframe/>");b.attr("src",a.attr("href")),a.parent().html(b)})}),$(".history-select-version").change(function(a){var b=$(this).val();$(".history-forms-area").addClass("hidden").eq(b).removeClass("hidden")}),$(".toggle-version").click(function(){$(this).siblings(".history-version").toggleClass("hidden"),$(this).siblings(".history-diff").toggleClass("hidden"),$(this).siblings(".toggle-version").toggleClass("hidden"),$(this).toggleClass("hidden")}),$(function(){var a=window.location.href;$($(".tabs").find("a").get().reverse()).each(function(b,c){if(a.indexOf(c)>=0)return $(c).addClass("selected"),!1})}),$(function(){$("body").on("click",".show-popup",function(a){a.preventDefault(),$(this).parent().find(".popup").toggle()}),$("body").on("click",".close-popup",function(a){a.preventDefault();var b=$(this);b.hasClass("popup")?b.remove():b.closest(".popup").remove()})}),$(function(){$(".dropdown-trigger").click(function(a){a.preventDefault(),$("#"+$(this).data("target-id")).toggle()})}),$(function(){function a(a){$(a).closest(".nav").find(".order-by").removeClass("selected"),$(a).addClass("selected")}function b(a){$(a).closest(".pager").find("li").removeClass("current"),$(a).addClass("current")}function c(a,b){var c=$(a).closest(".user-questions").find(".pager");c.find("a").each(function(a,c){var d=$(c).parent();d.removeClass("current"),0==a&&d.addClass("current"),$(c).attr("href",b+"&p="+$(c).html())})}$(".advanced-data-section").on("click",".order-by",function(b){b.preventDefault();var d=$(this),e=d.attr("href"),f=$("#"+d.data("target-id")).parent(),g=f.find(".subheader");a(d);var h=g[0].outerHTML;$.get(e,function(a){f.html(h+a),c(f,e)})}),$(".advanced-data-section").on("click",".pager a",function(a){a.preventDefault();var c=$(this),d=$("#"+c.data("target-id")).parent(),e=d.find(".subheader")[0].outerHTML;$.get(c.attr("href"),function(a){d.html(e+a),b(c.parent())})})}),$(function(){$(".share-button").click(function(){var a=$(this).data("shareurl");window.open(a,"share","width=650, height=450")})}),$(".history-form").each(function(a,b){$(".history-comparison").prettyTextDiff({originalContainer:".history-current .post-text",changedContainer:$(b).find(".history-version .post-text").first(),diffContainer:$(b).find(".history-diff.post-text").first(),cleanup:!0})}),$(".flag-it").click(function(a){a.preventDefault();var b=$(this),c=(b.parent(),b.parents(".comment")),d=new Modal($("#"+b.data("modal-id"))),e=d.element.find("form"),f=e.attr("action");b.toggleClass("selected"),c.toggleClass("to-flag");var g={};g[409]=function(){errorPopup(Messages.get("error.cant_do"),d.element,"center-popup")},g[400]=function(){errorPopup(Messages.get("hint.choose_an_option"),d.element,"center-popup")},g[403]=function(){errorPopup(Messages.get("auth.requires_login"),d.element,"center-popup")},g[200]=function(){d.hide(200),b.remove()};var h=e.find(".error");e.change(function(){h.text("")}),e.submit(function(a){a.preventDefault();var b=e.find("input:radio:checked");return isEmpty(b)?void h.text(Messages.get("hint.choose_a_reason")).show():(reason=e.find("textarea"),"OTHER"==b.val()&&isEmpty(reason.val())?void h.text(Messages.get("hint.describe_reason")).show():void $.ajax(f,{complete:function(a,b){void 0!=g[a.status]?g[a.status].call():(errorPopup(Messages.get("error.occured"),d,"center-popup"),console.log(a))},data:e.serialize(),headers:{Accept:"application/json"},method:"POST"}))})}),$(".other-option").change(function(){var a=$(this);a.siblings("#other-reason").show(200)}),$(".modal input:not(.other-option)").change(function(){$(".modal #other-reason").hide()}),$(".more-comments").click(function(){var a=$(this).siblings(".comment-list").find(".collapsed");a.toggleClass("hidden"),a.hasClass("hidden")?$(this).html(Messages.get("show_all")+" <strong>"+$(this).attr("size")+"</strong> "+Messages.get("the_comments")):$(this).html("Ocultar comentários")}),$(".button-hint").click(function(a){var b=$(this),c=$("#"+b.data("button-hint-id"));$(".button-hint-text").not(c).hide(100),$(".button-hint").not(b).removeClass("active"),c.toggle(150),b.toggleClass("active")}),$(function(){$(".answer-form textarea").focus(function(a){var b=$(this).parents(".answer-form");if(b.data("same-author")&&!b.data("warned")){var c=$(".same-author-confirmation"),d=b.find("textarea"),e=b.find("input[type='submit']"),f=$("#wmd-button-bar"),g=b.find("input");d.parent().append(c),c.show(),e.addClass("opaque"),f.addClass("opaque"),g.attr("disabled",!0),c.find("button").click(function(){return c.hide(),d.show(),f.removeClass("opaque"),e.removeClass("opaque"),g.attr("disabled",!1),!1}),d.hide(),b.data("warned",!0)}})}),$("form").not(".ajax").submit(function(a){var b=$(this);if(b.valid()){var c=b.find("input[type=submit]");c.attr("disabled","true"),b.addClass("inactive")}}),manipulateBanner(),$(".minimize-banner").click(function(){var a=$(this).closest(".about-banner");toggleBanner(a),localStorage.minimizedBanner=void 0!=$(".minimized-banner")[0]}),$(function(){function a(a,b,c){a&&e.append("<li class='hint-tip "+c+"'>"+b+"</li>")}function b(){0!=e.find("li").length?d.show(100):d.hide(100)}function c(a,b){for(var c in b){var d=b[c];if(a.toLowerCase().indexOf(d.toLowerCase())!=-1)return!0}return!1}var d=$("<div>");d.addClass("question-warnings").html("<h4 class='section-title hint-title'>"+Messages.get("validation.bad_post")+"</h4><ul></ul>").hide(),$(".validated-form").eq(0).before(d);var e=d.find("ul");$("#question-title").keyup(function(){var d=$(this),f=d.val(),g="title-messages";e.find("li."+g).remove();var h=[Messages.get("metas.help"),Messages.get("metas.help_me"),"help",Messages.get("metas.assist_me"),Messages.get("metas.urgent"),"please"];a(f.toUpperCase()==f&&f.length>1,Messages.get("validation.avoid_only_uppercase_title"),g),a(c(f,h),Messages.get("validation.avoid_use_of"),g),a(c(f,["resolvido"]),Messages.get("validation.do_not_use"),g),b()}),$(".description-input").keyup(function(){var d=$(this),f=d.val(),g="description-messages";e.find("li."+g).remove();var h=["kkk","vc","!!","??","..."];a(f.toUpperCase()==f&&f.length>1,Messages.get("validation.avoid_only_uppercase_title"),g),a(c(f,h),Messages.get("validation.make_clear_post"),g),b()})}),$(".approve-news").click(function(a){a.preventDefault();var b=$(this);$.post(b.attr("href"),function(){b.closest(".post-item").removeClass("post-under-review"),b.remove()})}),$(function(){function a(a){function b(a){a==Messages.get("user.block_user")?c.html(Messages.get("user.unblock_user")):c.html(Messages.get("user.block_user"))}a.preventDefault();var c=$(this);$.ajax({url:c.attr("data-url"),method:"POST",beforeSend:function(){b(c.html())},error:function(a){errorPopup(Messages.get("error.occured"),c,"center-popup"),console.log(a)}})}$(".ban-user").on("click",a)}),function(){function a(a){return""==a.trim()?void c.hide():(c.show(),void c.find(".suggested-questions-list").html(a))}var b,c=$("#question-suggestions"),d=$("#question-title");d.keyup(function(){var e=d.val();e.length>=5?(clearTimeout(b),b=setTimeout(function(){$.get("/questionSuggestion",{query:e,limit:2},a)},1e3)):c.hide()})}(),$(function(){function a(a){$("."+a).submit()}$(document).on("click",".delete-post, .delete-user",function(b){b.preventDefault();var c=!0,d=$(this),e=d.data("delete-form"),f=d.data("item-type")||"item";d.data("confirm-deletion")&&(c=confirm("Are you sure that you want to delete this "+f+"?")),c&&a(e)})}),$(".unblock").click(function(a){$(this).siblings("form").submit()});